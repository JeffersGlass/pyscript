<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <title>PyScript Namespaces Example</title>

    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="/pyscriptjs/examples/build/pyscript.css" />

    <script defer src="/pyscriptjs/examples/build/pyscript.js"></script>
    <style>pre {overflow-x: auto;}</style>
  </head>

  <body class="ml-5">
    <h1 class="text-2xl font-semibold">Custom Namespaces</h1>
    <p>The following examples demonstrate using the 'namespace' attribute to set which namespace Pyscript blocks execute within.</p>
    <p>The first block of code should run without errors. <b>The second, third, and fourth code blocks with have errors.</b> This is intentional, to demonstrate the variables that are and aren't available within individual namespaces.</p>
    <div class="grid grid-cols-1 space-y-6">
        <div class="grid grid-cols-2 gap-2 p-2 space-x-4 bg-blue-100 ">
            <pre>&lt;py-script&gt;
import math
print(f"This is executing in the default scope")
print("with python version" + str(sys.version.split(" ")[0]))
x, y, z = 1, 2, 3
print(f"{x=}")
print(f"{y=}")
print(f"{z=}")
print(f"{math.prod([x,y,z]) = }")
&lt;/py-script&gt;</pre>
          <py-script class="p-2 bg-gray-200 border-4 border-gray-400">
            import math
            print(f"This is executing in the default scope")
            print("with python version" + str(sys.version.split(" ")[0]))
            x, y, z = 1, 2, 3
            print(f"{x=}")
            print(f"{y=}")
            print(f"{z=}")
            print(f"{math.prod([x,y,z]) = }")
          </py-script>
        </div>

        <div class="grid grid-cols-2 gap-2 p-2 space-x-4 bg-yellow-100 ">
            <pre>&lt;py-script namespace = 'ns-one'&gt;
print(f"This is executing in a custom namespace called 'ns-one'")
print("with python version" + str(sys.version.split(" ")[0]))

x, y = 4, 5
#The math module has not be imported in this namespace, so we get a NameError
print(f"{math.prod([x,y]) = }")
&lt;/py-script&gt;</pre>
          <py-script namespace = 'ns-one'class="p-2 bg-gray-200 border-4 border-gray-400">
        import traceback
        print(f"This is executing in a custom namespace called 'ns-one'")
        print("with python version" + str(sys.version.split(" ")[0]))

        x, y = 4, 5
        print(f"{math.prod([x,y]) = }")
          </py-script>
        </div>
        <div class="grid grid-cols-2 gap-2 p-2 space-x-4 bg-green-100 ">
            <pre>&lt;py-script namespace = 'ns-two'&gt;
print("This is executing in a custom namespace called 'ns-two'")
print(f"with python version {str(sys.version.split(" ")[0])}")

x = 6
print(f"{x=}")

# y is not defined in this namespace so we will get a nameerror
print(f"{y=}")
&lt;/py-script&gt;</pre>
          <py-script namespace="ns-two"class="p-2 bg-gray-200 border-4 border-gray-400">
        import traceback
        print("This is executing in a custom namespace called 'ns-two'")
        print("with python version" + str(sys.version.split(" ")[0]))

        x = 6
        print(f"{x=}")
        print(f"{y=}")
                </py-script>
                </div>
          <div class="grid grid-cols-2 gap-2 p-2 space-x-4 bg-yellow-100 ">
              <pre>&lt;py-script namespace = 'ns-one'&gt;
print(f"This is executing in a custom namespace called 'ns-one'")
print("with python version" + str(sys.version.split(" ")[0]))

# x and y retain their values established in the earlier code block in this namespace
print(f"{x=}")
print(f"{y=}")

# however, z is not defined in this namespace, so we get a nameerror
print(f"{z=}")
&lt;/py-script&gt;</pre>
            <py-script namespace = 'ns-one'class="p-2 bg-gray-200 border-4 border-gray-400">
        print(f"This is executing in a custom namespace called 'ns-one'")
        print("with python version" + str(sys.version.split(" ")[0]))
        print(f"{x=}")
        print(f"{y=}")
        print(f"{z=}")
           </py-script>
          </div>
          <div>
            <h1 class="text-2xl font-semibold">REPLs</h1>
            <p>These two REPLs are in separate namespaces, "repl-1" and "repl-2". They are in different namespaces than the above code examples. Try assigning and reading variables to see that their namespaces keep them separate.</p>
            <p>All auto-generated REPLs inherit their namespace from the REPL that created them.</p>
            <div class="grid grid-cols-2 gap-2 p-2 space-x-4 divide-x-2">
              <div class="pb-2 bg-red-200">
                <py-repl namespace="repl-1" auto-generate="true"></py-repl>
              </div>
              <div class="pb-2 bg-purple-200">
                <py-repl namespace="repl-2" auto-generate="true"></py-repl>
              </div>
            </div>
          </div>
          <div>
            <h1 class="text-2xl font-semibold">Other Components</h1>
            <p>Py-buttons, py-inputbox, and other Pyscript tags can also make use of the 'namespace' attribute.</p>
            <p>Both of the buttons below set the text in this box to the value of the variable <code>x</code>. However, <code>x</code> is different in each of their namespaces</p>
            <div class="flex flex-row space-x-2">
              <div class="w-16 h-6 border-2 border-gray-500"><label id="button-output" class=""></label></div>
              <span class="italic"><code>&lt;label id="button-output&gt;</code></span>
            </div>
            <div class="grid grid-cols-2 gap-2 p-2 space-x-4 divide-x-2">
              <div class="bg-yellow-400">
                <pre class="mb-4">
&lt;py-script namespace="button-1"&gt;
x = 1
&lt;/py-script&gt;
&lt;py-button namespace="button-1 label="Set Label to 1"&gt;
def on_click(event):
  from js import document
  document.getElementById("button-output").innerText = str(x)
&lt;/py-button&gt;</pre>
                <py-script namespace="button-1">x = 1</py-script>
                <py-button namespace="button-1" label="Set Label to 1">
                  def on_click(event):
                    from js import document
                    document.getElementById("button-output").innerText = str(x)
                </py-button>
              </div>
              <div class="bg-gray-300">
<pre class="mb-4">
&lt;py-script namespace="button-2"&gt;
x = 2
&lt;/py-script&gt;
&lt;py-button namespace="button-2" label="Set Label to 2"&gt;
def on_click(event):
  from js import document
  document.getElementById("button-output").innerText = str(x)
&lt;/py-button&gt;
</pre>
                <py-script namespace="button-2">x = 2</py-script>
                <py-button namespace="button-2" label="Set Label to 2">
                  def on_click(event):
                    from js import document
                    document.getElementById("button-output").innerText = str(x)
                </py-button>
              </div>
            </div>
          </div>
        </div>
    </div>
  </body>
</html>
