<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <title>PyScript Hello World</title>

    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <!-- <script defer src="https://pyscript.net/latest/pyscript.js"></script> -->
    <script defer src="../pyscriptjs/build/pyscript.js"></script>
    
    <py-config>
      - autoclose_loader: true
      - runtimes:
         -  src: "https://pyodide-cdn2.iodide.io/dev/full/pyodide.js"
            name: pyodide-dev
            lang: python
    </py-config>
  </head>

  <body>
    <h1 style="font-size: xx-large;">COPY COPY COPY</h1>
    <!-- <script src="https://pyodide-cdn2.iodide.io/dev/full/pyodide.js"></script> -->
    <script type="module" src="canvas.js"></script>
<!--     <script>
    async function main(){
      const pyodide = await loadPyodide()
      canvas = await import('./canvas.js')
      create = canvas.create
      pyodide.runPython(`
      from js import canvas
      from js import console
      import pyodide_js
      console.log(f"{pyodide_js.version= }")
      `)
      }
      main();
      
    </script> -->
    <!-- <script>
      import * as canvas from './canvas.js'
    </script> -->
    <script>
      async function load_canvas(){
        canvas = await import('./canvas.js')
      }
      load_canvas()
    </script>

<py-script>
  import pyodide_js

  for d in dir(pyodide_js):
    print(d)
  print(f"{pyodide_js.version= }")

  from js import canvas

  ctx = canvas.create('myCanvas', document.body, 480, 320).ctx
  ctx.fillStyle = "blue"
  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)
</py-script>
  </body>
</html>
