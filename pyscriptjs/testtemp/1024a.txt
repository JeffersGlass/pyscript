make examples
make[1]: Entering directory '/home/jglass/Documents/pyscript/pyscriptjs'
mkdir -p ./examples
cp -r ../examples/* ./examples
chmod -R 755 examples
find ./examples/toga -type f -name '*.html' -exec sed -i s+https://pyscript.net/latest/+../../build/+g {} \;
find ./examples/webgl -type f -name '*.html' -exec sed -i s+https://pyscript.net/latest/+../../../build/+g {} \;
find ./examples -type f -name '*.html' -exec sed -i s+https://pyscript.net/latest/+../build/+g {} \;
npm run build

> pyscript@0.0.1 build
> npm run tsc && node esbuild.mjs


> pyscript@0.0.1 tsc
> tsc --noEmit

[1mpyscript[0m [2m(prod)[0m built in: 96.025ms
rm -rf ./examples/build
mkdir -p ./examples/build
cp -R ./build/* ./examples/build
To serve examples run: conda run -p /home/jglass/Documents/pyscript/pyscriptjs/env python -m http.server 8080 --directory examples
make[1]: Leaving directory '/home/jglass/Documents/pyscript/pyscriptjs'
make test-ts
make[1]: Entering directory '/home/jglass/Documents/pyscript/pyscriptjs'
npm run test

> pyscript@0.0.1 test
> cross-env NODE_OPTIONS=--experimental-vm-modules jest --coverage

  console.error
    Something went wrong!

      72 |     switch (`log-${level}-${logMessage}`) {
      73 |         case 'log-error-true':
    > 74 |             console.error(message);
         |                     ^
      75 |             break;
      76 |         case 'log-warning-true':
      77 |             console.warn(message);

      at error (src/exceptions.ts:74:21)
      at Object.<anonymous> (tests/unit/exceptions.test.ts:11:9)

  console.warn
    This is a warning

      75 |             break;
      76 |         case 'log-warning-true':
    > 77 |             console.warn(message);
         |                     ^
      78 |             break;
      79 |     }
      80 |

      at warn (src/exceptions.ts:77:21)
      at Object.<anonymous> (tests/unit/exceptions.test.ts:21:9)

  console.error
    Something went wrong!

      72 |     switch (`log-${level}-${logMessage}`) {
      73 |         case 'log-error-true':
    > 74 |             console.error(message);
         |                     ^
      75 |             break;
      76 |         case 'log-warning-true':
      77 |             console.warn(message);

      at console.<anonymous> (node_modules/jest-mock/build/index.js:709:23)
      at error (src/exceptions.ts:74:21)
      at Object.<anonymous> (tests/unit/exceptions.test.ts:33:9)

  console.warn
    This warning

      75 |             break;
      76 |         case 'log-warning-true':
    > 77 |             console.warn(message);
         |                     ^
      78 |             break;
      79 |     }
      80 |

      at console.<anonymous> (node_modules/jest-mock/build/index.js:709:23)
      at warn (src/exceptions.ts:77:21)
      at Object.<anonymous> (tests/unit/exceptions.test.ts:41:9)

  console.warn
    Warning!

      75 |             break;
      76 |         case 'log-warning-true':
    > 77 |             console.warn(message);
         |                     ^
      78 |             break;
      79 |     }
      80 |

      at console.<anonymous> (node_modules/jest-mock/build/index.js:709:23)
      at warn (src/exceptions.ts:77:21)
      at Object.<anonymous> (tests/unit/exceptions.test.ts:50:9)

  console.error
    <p>Test message</p>

      72 |     switch (`log-${level}-${logMessage}`) {
      73 |         case 'log-error-true':
    > 74 |             console.error(message);
         |                     ^
      75 |             break;
      76 |         case 'log-warning-true':
      77 |             console.warn(message);

      at console.<anonymous> (node_modules/jest-mock/build/index.js:709:23)
      at error (src/exceptions.ts:74:21)
      at Object.<anonymous> (tests/unit/exceptions.test.ts:85:9)

  console.error
    <p>Test message</p>

      72 |     switch (`log-${level}-${logMessage}`) {
      73 |         case 'log-error-true':
    > 74 |             console.error(message);
         |                     ^
      75 |             break;
      76 |         case 'log-warning-true':
      77 |             console.warn(message);

      at console.<anonymous> (node_modules/jest-mock/build/index.js:709:23)
      at error (src/exceptions.ts:74:21)
      at Object.<anonymous> (tests/unit/exceptions.test.ts:98:9)

  console.warn
    A unique error message

      75 |             break;
      76 |         case 'log-warning-true':
    > 77 |             console.warn(message);
         |                     ^
      78 |             break;
      79 |     }
      80 |

      at warn (src/exceptions.ts:77:21)
      at _createAlertBanner (src/utils.ts:112:9)
      at Object.<anonymous> (tests/unit/utils.test.ts:57:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading  /covfefe.json

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading  /covfefe.json

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading  /covfefe.json

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading  /covfefe.json

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [py-config] loading <py-config> content

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.error
    (PY0000): Computer says no

      72 |     switch (`log-${level}-${logMessage}`) {
      73 |         case 'log-error-true':
    > 74 |             console.error(message);
         |                     ^
      75 |             break;
      76 |         case 'log-warning-true':
      77 |             console.warn(message);

      at error (src/exceptions.ts:74:21)
      at MyApp._createAlertBanner [as _handleUserErrorMaybe] (src/main.ts:136:13)
      at MyApp._handleUserErrorMaybe [as main] (src/main.ts:115:24)
      at Object.<anonymous> (tests/unit/main.test.ts:30:9)

  console.error
    (PY0000): hello <br>

      72 |     switch (`log-${level}-${logMessage}`) {
      73 |         case 'log-error-true':
    > 74 |             console.error(message);
         |                     ^
      75 |             break;
      76 |         case 'log-warning-true':
      77 |             console.warn(message);

      at error (src/exceptions.ts:74:21)
      at MyApp._createAlertBanner [as _handleUserErrorMaybe] (src/main.ts:136:13)
      at MyApp._handleUserErrorMaybe [as main] (src/main.ts:115:24)
      at Object.<anonymous> (tests/unit/main.test.ts:42:9)

  console.error
    (PY0000): hello <br>

      72 |     switch (`log-${level}-${logMessage}`) {
      73 |         case 'log-error-true':
    > 74 |             console.error(message);
         |                     ^
      75 |             break;
      76 |         case 'log-warning-true':
      77 |             console.warn(message);

      at error (src/exceptions.ts:74:21)
      at MyApp._createAlertBanner [as _handleUserErrorMaybe] (src/main.ts:136:13)
      at MyApp._handleUserErrorMaybe [as main] (src/main.ts:115:24)
      at Object.<anonymous> (tests/unit/main.test.ts:54:9)

  console.info
    [pyscript/pyodide] importing pyscript

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [pyscript/pyodide] pyodide loaded and initialized

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [pyscript/pyodide] pyodide.loadPackage: numpy

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [pyscript/pyodide] Loading numpy

      at Object.out_fn [as info] (src/logger.ts:50:13)

  console.info
    [pyscript/pyodide] Loaded numpy

      at Object.out_fn [as info] (src/logger.ts:50:13)

---------------------------|---------|----------|---------|---------|---------------------------------
File                       | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s               
---------------------------|---------|----------|---------|---------|---------------------------------
All files                  |    37.2 |    42.47 |   38.21 |   37.73 |                                 
 pyscriptjs                |     100 |    83.33 |     100 |     100 |                                 
  directoryManifest.mjs    |     100 |    83.33 |     100 |     100 | 40                              
 pyscriptjs/src            |   53.07 |    59.23 |   51.18 |   54.56 |                                 
  exceptions.ts            |   95.34 |      100 |   83.33 |   95.34 | 61-62                           
  fetch.ts                 |   94.11 |    88.88 |     100 |   94.11 | 53                              
  interpreter_client.ts    |   56.25 |      100 |   42.85 |   56.25 | 75-92                           
  logger.ts                |     100 |      100 |     100 |     100 |                                 
  main.ts                  |    16.9 |       20 |   17.39 |   16.54 | 35-37,120-129,147-434,443       
  plugin.ts                |   14.28 |        0 |   16.66 |   15.38 | 150-218,243-267                 
  pyconfig.ts              |   86.31 |    74.41 |    92.3 |   86.31 | 117,121,128,177,211-225         
  pyexec.ts                |    4.34 |        0 |       0 |    4.34 | 14-73                           
  remote_interpreter.ts    |      45 |     9.09 |   45.45 |      45 | 104,134-135,146,166-255,268-273 
  stdio.ts                 |   96.77 |       70 |     100 |   96.55 | 73                              
  utils.ts                 |   73.58 |       65 |   63.63 |   77.55 | 4-11,45,58,92,130-134           
  version.ts               |     100 |      100 |     100 |     100 |                                 
 pyscriptjs/src/components |    2.76 |        0 |       0 |    2.76 |                                 
  elements.ts              |       0 |      100 |       0 |       0 | 7-11                            
  pyrepl.ts                |    2.38 |        0 |       0 |    2.38 | 36-224                          
  pyscript.ts              |     3.5 |        0 |       0 |     3.5 | 26-70,170-250                   
  pywidget.ts              |    2.77 |        0 |       0 |    2.77 | 14-100                          
 pyscriptjs/src/plugins    |   14.76 |    21.53 |      20 |   14.58 |                                 
  calculateFetchPaths.ts   |     100 |      100 |     100 |     100 |                                 
  importmap.ts             |    5.55 |        0 |       0 |    6.25 | 24-50                           
  pyterminal.ts            |    8.69 |        0 |    9.09 |    9.09 | 14-24,38-138                    
  splashscreen.ts          |    9.09 |     7.69 |   11.11 |    9.09 | 31-62,69-107                    
  stdiodirector.ts         |       5 |        0 |      20 |       5 | 34-128                          
---------------------------|---------|----------|---------|---------|---------------------------------
make[1]: Leaving directory '/home/jglass/Documents/pyscript/pyscriptjs'
make test-py
make[1]: Entering directory '/home/jglass/Documents/pyscript/pyscriptjs'
Tests from /home/jglass/Documents/pyscript/pyscriptjs/src
mkdir -p test_results
/home/jglass/Documents/pyscript/pyscriptjs/env/bin/pytest -vv  tests/py-unit/ --log-cli-level=warning --junitxml=test_results/py-unit.xml
============================= test session starts ==============================
platform linux -- Python 3.11.0, pytest-7.1.2, pluggy-1.0.0 -- /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python
cachedir: .pytest_cache
Test order randomisation NOT enabled. Enable with --random-order or --random-order-bucket=<bucket_type>
rootdir: /home/jglass/Documents/pyscript/pyscriptjs
plugins: random-order-1.1.0, base-url-2.0.0, playwright-0.3.2, xdist-3.2.1, instafail-0.5.0
collecting ... collected 19 items

tests/py-unit/test_pyscript.py::TestElement::test_id_is_correct PASSED   [  5%]
tests/py-unit/test_pyscript.py::TestElement::test_element PASSED         [ 10%]
tests/py-unit/test_pyscript.py::test_format_mime_str PASSED              [ 15%]
tests/py-unit/test_pyscript.py::test_format_mime_str_escaping PASSED     [ 21%]
tests/py-unit/test_pyscript.py::test_format_mime_repr_escaping PASSED    [ 26%]
tests/py-unit/test_pyscript.py::test_format_mime_HTML PASSED             [ 31%]
tests/py-unit/test_pyscript.py::test_uses_top_level_await PASSED         [ 36%]
tests/py-unit/test_pyscript.py::test_set_version_info PASSED             [ 42%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_repr PASSED   [ 47%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_show_warning_override PASSED [ 52%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_getattr PASSED [ 57%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_dont_show_warning_twice PASSED [ 63%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_call PASSED   [ 68%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_iter PASSED   [ 73%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_getitem PASSED [ 78%]
tests/py-unit/test_pyscript.py::TestDeprecatedGlobal::test_setitem PASSED [ 84%]
tests/py-unit/test_python_plugins.py::TestPyMarkdown::test_plugin_hooks PASSED [ 89%]
tests/py-unit/test_python_plugins.py::TestPyTutor::test_connected_calls PASSED [ 94%]
tests/py-unit/test_python_plugins.py::TestPyTutor::test_plugin_registered PASSED [100%]

=============================== warnings summary ===============================
src/python/pyscript/__init__.py:26
  /home/jglass/Documents/pyscript/pyscriptjs/src/python/pyscript/__init__.py:26: DeprecationWarning: There is no current event loop
    loop = asyncio.get_event_loop()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /home/jglass/Documents/pyscript/pyscriptjs/test_results/py-unit.xml -
======================== 19 passed, 1 warning in 0.04s =========================
make[1]: Leaving directory '/home/jglass/Documents/pyscript/pyscriptjs'
make test-integration-parallel
make[1]: Entering directory '/home/jglass/Documents/pyscript/pyscriptjs'
make examples
make[2]: Entering directory '/home/jglass/Documents/pyscript/pyscriptjs'
mkdir -p ./examples
cp -r ../examples/* ./examples
chmod -R 755 examples
find ./examples/toga -type f -name '*.html' -exec sed -i s+https://pyscript.net/latest/+../../build/+g {} \;
find ./examples/webgl -type f -name '*.html' -exec sed -i s+https://pyscript.net/latest/+../../../build/+g {} \;
find ./examples -type f -name '*.html' -exec sed -i s+https://pyscript.net/latest/+../build/+g {} \;
npm run build

> pyscript@0.0.1 build
> npm run tsc && node esbuild.mjs


> pyscript@0.0.1 tsc
> tsc --noEmit

[1mpyscript[0m [2m(prod)[0m built in: 73.887ms
rm -rf ./examples/build
mkdir -p ./examples/build
cp -R ./build/* ./examples/build
To serve examples run: conda run -p /home/jglass/Documents/pyscript/pyscriptjs/env python -m http.server 8080 --directory examples
make[2]: Leaving directory '/home/jglass/Documents/pyscript/pyscriptjs'
mkdir -p test_results
/home/jglass/Documents/pyscript/pyscriptjs/env/bin/pytest --numprocesses auto -vv  tests/integration/ --log-cli-level=warning --junitxml=test_results/integration.xml --instafail --random-order
gw0 I / gw1 I / gw2 I / gw3 I / gw4 I / gw5 I / gw6 I / gw7 I
[gw0] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
[gw1] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
[gw2] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
[gw3] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
[gw4] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
[gw5] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
[gw6] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
[gw7] linux Python 3.11.0 cwd: /home/jglass/Documents/pyscript/pyscriptjs
============================= test session starts ==============================
platform linux -- Python 3.11.0, pytest-7.1.2, pluggy-1.0.0 -- /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python
cachedir: .pytest_cache
Using --random-order-bucket=module
Using --random-order-seed=217974

rootdir: /home/jglass/Documents/pyscript/pyscriptjs
plugins: random-order-1.1.0, base-url-2.0.0, playwright-0.3.2, xdist-3.2.1, instafail-0.5.0
collecting ... [gw0] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
[gw1] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
[gw2] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
[gw3] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
[gw4] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
[gw5] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
[gw6] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
[gw7] Python 3.11.0 (main, Jan 16 2023, 14:19:54) [GCC 11.2.0]
gw0 [191] / gw1 [191] / gw2 [191] / gw3 [191] / gw4 [191] / gw5 [191] / gw6 [191] / gw7 [191]

scheduling tests via LoadScheduling

tests/integration/test_splashscreen.py::TestSplashscreen::test_splashscreen_closes_on_error_with_pys_onClick[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_packages[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_dynamic_tags[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_target_element_id_change[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_js_version[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_getPySrc_returns_source_code[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_execution_in_order[chromium] 
[gw1] [  0%] SKIPPED tests/integration/test_splashscreen.py::TestSplashscreen::test_splashscreen_closes_on_error_with_pys_onClick[chromium] 
tests/integration/test_splashscreen.py::TestSplashscreen::test_splashscreen_disabled_option[chromium] 
tests/integration/test_warnings_and_banners.py::TestWarningsAndBanners::test_create_singular_warning[chromium] 
[gw6] [  1%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_dynamic_tags[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_linebreaks[chromium] 
[gw2] [  1%] PASSED tests/integration/test_01_basic.py::TestBasic::test_execution_in_order[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_pys_onClick_shows_deprecation_warning[chromium] 
[gw2] [  2%] SKIPPED tests/integration/test_01_basic.py::TestBasic::test_pys_onClick_shows_deprecation_warning[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_py_script_src_not_found[chromium] 
[gw3] [  2%] PASSED tests/integration/test_01_basic.py::TestBasic::test_js_version[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_py_mount_shows_deprecation_warning[chromium] 
[gw0] [  3%] PASSED tests/integration/test_splashscreen.py::TestSplashscreen::test_splashscreen_disabled_option[chromium] 
tests/integration/test_splashscreen.py::TestSplashscreen::test_autoclose_false[chromium] 
[gw5] [  3%] PASSED tests/integration/test_01_basic.py::TestBasic::test_getPySrc_returns_source_code[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_solo[chromium] 
[gw1] [  4%] PASSED tests/integration/test_warnings_and_banners.py::TestWarningsAndBanners::test_create_singular_warning[chromium] 
[gw7] [  4%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_target_element_id_change[chromium] 
[gw4] [  5%] PASSED tests/integration/test_01_basic.py::TestBasic::test_packages[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_non_existent_package[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_stderr[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_pyscript_hello[chromium] 
[gw6] [  5%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_linebreaks[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_output_attribute_change[chromium] 
[gw2] [  6%] PASSED tests/integration/test_01_basic.py::TestBasic::test_py_script_src_not_found[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_escaping_of_angle_brackets[chromium] 
[gw3] [  6%] PASSED tests/integration/test_01_basic.py::TestBasic::test_py_mount_shows_deprecation_warning[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_python_exception_in_event_handler[chromium] 
[gw0] [  7%] PASSED tests/integration/test_splashscreen.py::TestSplashscreen::test_autoclose_false[chromium] 
tests/integration/test_splashscreen.py::TestSplashscreen::test_autoshow_and_autoclose[chromium] 
[gw4] [  7%] PASSED tests/integration/test_01_basic.py::TestBasic::test_pyscript_hello[chromium] 
[gw7] [  8%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_stderr[chromium] 
tests/integration/test_style.py::TestStyle::test_pyscript_defined[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_assert_no_banners[chromium] 
[gw1] [  8%] PASSED tests/integration/test_01_basic.py::TestBasic::test_non_existent_package[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_no_python_wheel[chromium] 
[gw5] [  9%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_solo[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_stderr_id_errors[chromium] 
[gw2] [  9%] PASSED tests/integration/test_01_basic.py::TestBasic::test_escaping_of_angle_brackets[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_python_exception[chromium] 
[gw6] [ 10%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_output_attribute_change[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_stdout_id_errors[chromium] 
[gw3] [ 10%] PASSED tests/integration/test_01_basic.py::TestBasic::test_python_exception_in_event_handler[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_deprecated_globals[chromium] 
[gw0] [ 11%] PASSED tests/integration/test_splashscreen.py::TestSplashscreen::test_autoshow_and_autoclose[chromium] 
tests/integration/test_splashscreen.py::TestSplashscreen::test_autoclose_loader_deprecated[chromium] 
[gw7] [ 12%] PASSED tests/integration/test_style.py::TestStyle::test_pyscript_defined[chromium] 
tests/integration/test_style.py::TestStyle::test_pyscript_not_defined[chromium] 
[gw1] [ 12%] PASSED tests/integration/test_01_basic.py::TestBasic::test_no_python_wheel[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_dynamically_add_py_script_tag[chromium] 
[gw7] [ 13%] PASSED tests/integration/test_style.py::TestStyle::test_pyscript_not_defined[chromium] 
tests/integration/test_py_config.py::TestConfig::test_paths_that_do_not_exist[chromium] 
[gw4] [ 13%] PASSED tests/integration/test_01_basic.py::TestBasic::test_assert_no_banners[chromium] 
[gw5] [ 14%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_stderr_id_errors[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_async[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_py_script_src_attribute[chromium] 
[gw2] [ 14%] PASSED tests/integration/test_01_basic.py::TestBasic::test_python_exception[chromium] 
tests/integration/test_py_config.py::TestConfig::test_py_config_external[chromium] 
[gw3] [ 15%] PASSED tests/integration/test_01_basic.py::TestBasic::test_deprecated_globals[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_py_attribute_without_id[chromium] 
[gw6] [ 15%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_stdout_id_errors[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_interleaved[chromium] 
[gw1] [ 16%] PASSED tests/integration/test_01_basic.py::TestBasic::test_dynamically_add_py_script_tag[chromium] 
tests/integration/test_py_config.py::TestConfig::test_multiple_py_config[chromium] 
[gw0] [ 16%] PASSED tests/integration/test_splashscreen.py::TestSplashscreen::test_autoclose_loader_deprecated[chromium] 
tests/integration/test_splashscreen.py::TestSplashscreen::test_splashscreen_custom_message[chromium] 
[gw4] [ 17%] PASSED tests/integration/test_01_basic.py::TestBasic::test_py_script_src_attribute[chromium] 
tests/integration/test_01_basic.py::TestBasic::test_python_version[chromium] 
[gw7] [ 17%] PASSED tests/integration/test_py_config.py::TestConfig::test_paths_that_do_not_exist[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_fetch_js_plugin_bare[chromium] 
[gw5] [ 18%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_async[chromium] 
tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_escape[chromium] 
[gw2] [ 18%] PASSED tests/integration/test_py_config.py::TestConfig::test_py_config_external[chromium] 
tests/integration/test_py_config.py::TestConfig::test_invalid_toml_config[chromium] 
[gw6] [ 19%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_targeted_stdio_interleaved[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_remove_multiple_classes[chromium] 
[gw2] [ 19%] PASSED tests/integration/test_py_config.py::TestConfig::test_invalid_toml_config[chromium] 
tests/integration/test_py_config.py::TestConfig::test_invalid_json_config[chromium] 
[gw3] [ 20%] PASSED tests/integration/test_01_basic.py::TestBasic::test_py_attribute_without_id[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_fetch_js_plugin[chromium] 
[gw1] [ 20%] PASSED tests/integration/test_py_config.py::TestConfig::test_multiple_py_config[chromium] 
tests/integration/test_py_config.py::TestConfig::test_no_interpreter[chromium] 
[gw0] [ 21%] PASSED tests/integration/test_splashscreen.py::TestSplashscreen::test_splashscreen_custom_message[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_clone_no_id[chromium] 
[gw2] [ 21%] PASSED tests/integration/test_py_config.py::TestConfig::test_invalid_json_config[chromium] 
tests/integration/test_py_config.py::TestConfig::test_paths[chromium] 
[gw1] [ 22%] PASSED tests/integration/test_py_config.py::TestConfig::test_no_interpreter[chromium] 
tests/integration/test_py_config.py::TestConfig::test_py_config_inline[chromium] 
[gw7] [ 23%] PASSED tests/integration/test_plugins.py::TestPlugin::test_fetch_js_plugin_bare[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_execution_hooks[chromium] 
[gw4] [ 23%] PASSED tests/integration/test_01_basic.py::TestBasic::test_python_version[chromium] 
tests/integration/test_async.py::TestAsync::test_multiple_async_multiple_display_targeted[chromium] 
[gw5] [ 24%] PASSED tests/integration/test_stdio_handling.py::TestOutputHandling::test_stdio_escape[chromium] 
tests/integration/test_py_terminal.py::TestPyTerminal::test_config_true[chromium] 
[gw6] [ 24%] PASSED tests/integration/test_03_element.py::TestElement::test_element_remove_multiple_classes[chromium] 
[gw3] [ 25%] PASSED tests/integration/test_plugins.py::TestPlugin::test_fetch_js_plugin[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_value[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_write_no_append[chromium] 
[gw0] [ 25%] PASSED tests/integration/test_03_element.py::TestElement::test_element_clone_no_id[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_clone_with_id[chromium] 
[gw1] [ 26%] PASSED tests/integration/test_py_config.py::TestConfig::test_py_config_inline[chromium] 
tests/integration/test_py_config.py::TestConfig::test_runtime_still_works_but_shows_deprecation_warning[chromium] 
[gw2] [ 26%] PASSED tests/integration/test_py_config.py::TestConfig::test_paths[chromium] 
tests/integration/test_py_config.py::TestConfig::test_multiple_interpreter[chromium] 
[gw1] [ 27%] FAILED tests/integration/test_py_config.py::TestConfig::test_runtime_still_works_but_shows_deprecation_warning[chromium] 
_ TestConfig.test_runtime_still_works_but_shows_deprecation_warning[chromium] __
[gw1] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_py_config.TestConfig object at 0x7f3b3843ed10>
tar_location = '/tmp/tmpbiep3uvp/pyodide-build-0.20.0.tar.bz2'

    def test_runtime_still_works_but_shows_deprecation_warning(self, tar_location):
>       unzip(
            location=tar_location,
            extract_to=self.tmpdir,
        )

/home/jglass/Documents/pyscript/pyscriptjs/tests/integration/test_py_config.py:108: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/jglass/Documents/pyscript/pyscriptjs/tests/integration/test_py_config.py:29: in unzip
    file = tarfile.open(name=location, mode="r:bz2")
/home/jglass/Documents/pyscript/pyscriptjs/env/lib/python3.11/tarfile.py:1652: in open
    return func(name, filemode, fileobj, **kwargs)
/home/jglass/Documents/pyscript/pyscriptjs/env/lib/python3.11/tarfile.py:1730: in bz2open
    fileobj = BZ2File(fileobj or name, mode, compresslevel=compresslevel)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <bz2.BZ2File object at 0x7f3b2b540520>
filename = '/tmp/tmpbiep3uvp/pyodide-build-0.20.0.tar.bz2', mode = 'rb'

    def __init__(self, filename, mode="r", *, compresslevel=9):
        """Open a bzip2-compressed file.
    
        If filename is a str, bytes, or PathLike object, it gives the
        name of the file to be opened. Otherwise, it should be a file
        object, which will be used to read or write the compressed data.
    
        mode can be 'r' for reading (default), 'w' for (over)writing,
        'x' for creating exclusively, or 'a' for appending. These can
        equivalently be given as 'rb', 'wb', 'xb', and 'ab'.
    
        If mode is 'w', 'x' or 'a', compresslevel can be a number between 1
        and 9 specifying the level of compression: 1 produces the least
        compression, and 9 (default) produces the most compression.
    
        If mode is 'r', the input file may be the concatenation of
        multiple compressed streams.
        """
        self._fp = None
        self._closefp = False
        self._mode = _MODE_CLOSED
    
        if not (1 <= compresslevel <= 9):
            raise ValueError("compresslevel must be between 1 and 9")
    
        if mode in ("", "r", "rb"):
            mode = "rb"
            mode_code = _MODE_READ
        elif mode in ("w", "wb"):
            mode = "wb"
            mode_code = _MODE_WRITE
            self._compressor = BZ2Compressor(compresslevel)
        elif mode in ("x", "xb"):
            mode = "xb"
            mode_code = _MODE_WRITE
            self._compressor = BZ2Compressor(compresslevel)
        elif mode in ("a", "ab"):
            mode = "ab"
            mode_code = _MODE_WRITE
            self._compressor = BZ2Compressor(compresslevel)
        else:
            raise ValueError("Invalid mode: %r" % (mode,))
    
        if isinstance(filename, (str, bytes, os.PathLike)):
>           self._fp = _builtin_open(filename, mode)
E           FileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpbiep3uvp/pyodide-build-0.20.0.tar.bz2'

/home/jglass/Documents/pyscript/pyscriptjs/env/lib/python3.11/bz2.py:81: FileNotFoundError
---------------------------- Captured stdout setup -----------------------------


tests/integration/test_py_config.py::TestConfig::test_interpreter_config[chromium] 
[gw4] [ 27%] PASSED tests/integration/test_async.py::TestAsync::test_multiple_async_multiple_display_targeted[chromium] 
tests/integration/test_async.py::TestAsync::test_asyncio_ensure_future[chromium] 
[gw7] [ 28%] PASSED tests/integration/test_plugins.py::TestPlugin::test_execution_hooks[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_pyscript_exec_hooks[chromium] 
[gw1] [ 28%] FAILED tests/integration/test_py_config.py::TestConfig::test_interpreter_config[chromium] 
_________________ TestConfig.test_interpreter_config[chromium] _________________
[gw1] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_py_config.TestConfig object at 0x7f3b3843e410>
tar_location = '/tmp/tmpbiep3uvp/pyodide-build-0.20.0.tar.bz2'

    def test_interpreter_config(self, tar_location):
>       unzip(
            location=tar_location,
            extract_to=self.tmpdir,
        )

/home/jglass/Documents/pyscript/pyscriptjs/tests/integration/test_py_config.py:77: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/home/jglass/Documents/pyscript/pyscriptjs/tests/integration/test_py_config.py:29: in unzip
    file = tarfile.open(name=location, mode="r:bz2")
/home/jglass/Documents/pyscript/pyscriptjs/env/lib/python3.11/tarfile.py:1652: in open
    return func(name, filemode, fileobj, **kwargs)
/home/jglass/Documents/pyscript/pyscriptjs/env/lib/python3.11/tarfile.py:1730: in bz2open
    fileobj = BZ2File(fileobj or name, mode, compresslevel=compresslevel)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <bz2.BZ2File object at 0x7f3b2b5413f0>
filename = '/tmp/tmpbiep3uvp/pyodide-build-0.20.0.tar.bz2', mode = 'rb'

    def __init__(self, filename, mode="r", *, compresslevel=9):
        """Open a bzip2-compressed file.
    
        If filename is a str, bytes, or PathLike object, it gives the
        name of the file to be opened. Otherwise, it should be a file
        object, which will be used to read or write the compressed data.
    
        mode can be 'r' for reading (default), 'w' for (over)writing,
        'x' for creating exclusively, or 'a' for appending. These can
        equivalently be given as 'rb', 'wb', 'xb', and 'ab'.
    
        If mode is 'w', 'x' or 'a', compresslevel can be a number between 1
        and 9 specifying the level of compression: 1 produces the least
        compression, and 9 (default) produces the most compression.
    
        If mode is 'r', the input file may be the concatenation of
        multiple compressed streams.
        """
        self._fp = None
        self._closefp = False
        self._mode = _MODE_CLOSED
    
        if not (1 <= compresslevel <= 9):
            raise ValueError("compresslevel must be between 1 and 9")
    
        if mode in ("", "r", "rb"):
            mode = "rb"
            mode_code = _MODE_READ
        elif mode in ("w", "wb"):
            mode = "wb"
            mode_code = _MODE_WRITE
            self._compressor = BZ2Compressor(compresslevel)
        elif mode in ("x", "xb"):
            mode = "xb"
            mode_code = _MODE_WRITE
            self._compressor = BZ2Compressor(compresslevel)
        elif mode in ("a", "ab"):
            mode = "ab"
            mode_code = _MODE_WRITE
            self._compressor = BZ2Compressor(compresslevel)
        else:
            raise ValueError("Invalid mode: %r" % (mode,))
    
        if isinstance(filename, (str, bytes, os.PathLike)):
>           self._fp = _builtin_open(filename, mode)
E           FileNotFoundError: [Errno 2] No such file or directory: '/tmp/tmpbiep3uvp/pyodide-build-0.20.0.tar.bz2'

/home/jglass/Documents/pyscript/pyscriptjs/env/lib/python3.11/bz2.py:81: FileNotFoundError
---------------------------- Captured stdout setup -----------------------------


tests/integration/test_plugins.py::TestPlugin::test_fetch_js_no_export[chromium] 
[gw5] [ 29%] PASSED tests/integration/test_py_terminal.py::TestPyTerminal::test_config_true[chromium] 
tests/integration/test_py_terminal.py::TestPyTerminal::test_py_terminal[chromium] 
[gw3] [ 29%] PASSED tests/integration/test_03_element.py::TestElement::test_element_write_no_append[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_clear_div[chromium] 
[gw0] [ 30%] PASSED tests/integration/test_03_element.py::TestElement::test_element_clone_with_id[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_innerHtml[chromium] 
[gw6] [ 30%] PASSED tests/integration/test_03_element.py::TestElement::test_element_value[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_clear_input[chromium] 
[gw2] [ 31%] PASSED tests/integration/test_py_config.py::TestConfig::test_multiple_interpreter[chromium] 
tests/integration/test_py_config.py::TestConfig::test_paths_from_packages[chromium] 
[gw7] [ 31%] PASSED tests/integration/test_plugins.py::TestPlugin::test_pyscript_exec_hooks[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_fetch_js_plugin_non_existent[chromium] 
[gw1] [ 32%] PASSED tests/integration/test_plugins.py::TestPlugin::test_fetch_js_no_export[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_pyrepl_exec_hooks[chromium] 
[gw4] [ 32%] PASSED tests/integration/test_async.py::TestAsync::test_asyncio_ensure_future[chromium] 
tests/integration/test_async.py::TestAsync::test_sync_and_async_order[chromium] 
[gw5] [ 33%] PASSED tests/integration/test_py_terminal.py::TestPyTerminal::test_py_terminal[chromium] 
tests/integration/test_py_terminal.py::TestPyTerminal::test_config_auto[chromium] 
[gw3] [ 34%] PASSED tests/integration/test_03_element.py::TestElement::test_element_clear_div[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_add_multiple_class[chromium] 
[gw6] [ 34%] PASSED tests/integration/test_03_element.py::TestElement::test_element_clear_input[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_select[chromium] 
[gw0] [ 35%] PASSED tests/integration/test_03_element.py::TestElement::test_element_innerHtml[chromium] 
tests/integration/test_async.py::TestAsync::test_multiple_async[chromium] 
[gw2] [ 35%] PASSED tests/integration/test_py_config.py::TestConfig::test_paths_from_packages[chromium] 
tests/integration/test_py_terminal.py::TestPyTerminal::test_config_false[chromium] 
[gw1] [ 36%] PASSED tests/integration/test_plugins.py::TestPlugin::test_pyrepl_exec_hooks[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_fetch_python_plugin[chromium] 
[gw4] [ 36%] PASSED tests/integration/test_async.py::TestAsync::test_sync_and_async_order[chromium] 
tests/integration/test_async.py::TestAsync::test_async_display_untargeted[chromium] 
[gw5] [ 37%] PASSED tests/integration/test_py_terminal.py::TestPyTerminal::test_config_auto[chromium] 
tests/integration/test_py_terminal.py::TestPyTerminal::test_config_docked[chromium] 
[gw7] [ 37%] PASSED tests/integration/test_plugins.py::TestPlugin::test_fetch_js_plugin_non_existent[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_no_plugin_attribute_error[chromium] 
[gw3] [ 38%] PASSED tests/integration/test_03_element.py::TestElement::test_element_add_multiple_class[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_id[chromium] 
[gw6] [ 38%] PASSED tests/integration/test_03_element.py::TestElement::test_element_select[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_remove_single_class[chromium] 
[gw0] [ 39%] PASSED tests/integration/test_async.py::TestAsync::test_multiple_async[chromium] 
tests/integration/test_async.py::TestAsync::test_asyncio_create_task[chromium] 
[gw2] [ 39%] PASSED tests/integration/test_py_terminal.py::TestPyTerminal::test_config_false[chromium] 
tests/integration/test_02_display.py::TestOutput::test_display_list_dict_tuple[chromium] 
[gw1] [ 40%] PASSED tests/integration/test_plugins.py::TestPlugin::test_fetch_python_plugin[chromium] 
tests/integration/test_02_display.py::TestOutput::test_explicit_target_on_button_tag[chromium] 
[gw4] [ 40%] PASSED tests/integration/test_async.py::TestAsync::test_async_display_untargeted[chromium] 
tests/integration/test_py_terminal.py::TestPyTerminal::test_two_terminals[chromium] 
[gw5] [ 41%] PASSED tests/integration/test_py_terminal.py::TestPyTerminal::test_config_docked[chromium] 
tests/integration/test_py_terminal.py::TestPyTerminal::test_auto_attribute[chromium] 
[gw7] [ 41%] PASSED tests/integration/test_plugins.py::TestPlugin::test_no_plugin_attribute_error[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_py_plugin_inline[chromium] 
[gw3] [ 42%] PASSED tests/integration/test_03_element.py::TestElement::test_element_id[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_clone_to_other_element[chromium] 
[gw6] [ 42%] PASSED tests/integration/test_03_element.py::TestElement::test_element_remove_single_class[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_add_single_class[chromium] 
[gw2] [ 43%] PASSED tests/integration/test_02_display.py::TestOutput::test_display_list_dict_tuple[chromium] 
tests/integration/test_02_display.py::TestOutput::test_display_should_escape[chromium] 
[gw0] [ 43%] PASSED tests/integration/test_async.py::TestAsync::test_asyncio_create_task[chromium] 
tests/integration/test_async.py::TestAsync::test_asyncio_gather[chromium] 
[gw1] [ 44%] PASSED tests/integration/test_02_display.py::TestOutput::test_explicit_target_on_button_tag[chromium] 
tests/integration/test_02_display.py::TestOutput::test_display_multiple_values[chromium] 
[gw4] [ 45%] PASSED tests/integration/test_py_terminal.py::TestPyTerminal::test_two_terminals[chromium] 
tests/integration/test_02_display.py::TestOutput::test_consecutive_display_target[chromium] 
[gw5] [ 45%] PASSED tests/integration/test_py_terminal.py::TestPyTerminal::test_auto_attribute[chromium] 
tests/integration/test_02_display.py::TestOutput::test_image_renders_correctly[chromium] 
[gw7] [ 46%] PASSED tests/integration/test_plugins.py::TestPlugin::test_py_plugin_inline[chromium] 
tests/integration/test_plugins.py::TestPlugin::test_fetch_plugin_no_file_extension[chromium] 
[gw3] [ 46%] PASSED tests/integration/test_03_element.py::TestElement::test_element_clone_to_other_element[chromium] 
tests/integration/test_03_element.py::TestElement::test_element_write_append[chromium] 
[gw6] [ 47%] PASSED tests/integration/test_03_element.py::TestElement::test_element_add_single_class[chromium] 
tests/integration/test_02_display.py::TestOutput::test_display_multiple_append_false[chromium] 
[gw2] [ 47%] PASSED tests/integration/test_02_display.py::TestOutput::test_display_should_escape[chromium] 
tests/integration/test_02_display.py::TestOutput::test_simple_display[chromium] 
[gw1] [ 48%] PASSED tests/integration/test_02_display.py::TestOutput::test_display_multiple_values[chromium] 
tests/integration/test_02_display.py::TestOutput::test_append_false[chromium] 
[gw4] [ 48%] PASSED tests/integration/test_02_display.py::TestOutput::test_consecutive_display_target[chromium] 
tests/integration/test_02_display.py::TestOutput::test_implicit_target_from_a_different_tag[chromium] 
[gw7] [ 49%] PASSED tests/integration/test_plugins.py::TestPlugin::test_fetch_plugin_no_file_extension[chromium] 
tests/integration/test_interpreter.py::TestInterpreterAccess::test_backward_compatibility_runtime_python_access[chromium] 
[gw5] [ 49%] PASSED tests/integration/test_02_display.py::TestOutput::test_image_renders_correctly[chromium] 
tests/integration/test_02_display.py::TestOutput::test_display_HTML[chromium] 
[gw0] [ 50%] PASSED tests/integration/test_async.py::TestAsync::test_asyncio_gather[chromium] 
tests/integration/test_02_display.py::TestOutput::test_target_attribute[chromium] 
[gw3] [ 50%] PASSED tests/integration/test_03_element.py::TestElement::test_element_write_append[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_load_content_from_src[chromium] 
[gw6] [ 51%] PASSED tests/integration/test_02_display.py::TestOutput::test_display_multiple_append_false[chromium] 
tests/integration/test_02_display.py::TestOutput::test_consecutive_display[chromium] 
[gw2] [ 51%] PASSED tests/integration/test_02_display.py::TestOutput::test_simple_display[chromium] 
tests/integration/test_02_display.py::TestOutput::test_image_display[chromium] 
[gw1] [ 52%] PASSED tests/integration/test_02_display.py::TestOutput::test_append_false[chromium] 
tests/integration/test_02_display.py::TestOutput::test_explicit_different_target_from_call[chromium] 
[gw4] [ 52%] PASSED tests/integration/test_02_display.py::TestOutput::test_implicit_target_from_a_different_tag[chromium] 
tests/integration/test_02_display.py::TestOutput::test_multiple_display_calls_same_tag[chromium] 
[gw7] [ 53%] PASSED tests/integration/test_interpreter.py::TestInterpreterAccess::test_backward_compatibility_runtime_python_access[chromium] 
tests/integration/test_interpreter.py::TestInterpreterAccess::test_interpreter_python_access[chromium] 
[gw0] [ 53%] PASSED tests/integration/test_02_display.py::TestOutput::test_target_attribute[chromium] 
tests/integration/test_02_display.py::TestOutput::test_empty_HTML_and_console_output[chromium] 
[gw5] [ 54%] PASSED tests/integration/test_02_display.py::TestOutput::test_display_HTML[chromium] 
tests/integration/test_02_display.py::TestOutput::test_no_implicit_target[chromium] 
[gw3] [ 54%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_load_content_from_src[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_element_id_change[chromium] 
[gw6] [ 55%] PASSED tests/integration/test_02_display.py::TestOutput::test_consecutive_display[chromium] 
tests/integration/test_02_display.py::TestOutput::test_display_multiple_append_false_with_target[chromium] 
[gw1] [ 56%] PASSED tests/integration/test_02_display.py::TestOutput::test_explicit_different_target_from_call[chromium] 
tests/integration/test_02_display.py::TestOutput::test_console_line_break[chromium] 
[gw7] [ 56%] PASSED tests/integration/test_interpreter.py::TestInterpreterAccess::test_interpreter_python_access[chromium] 
tests/integration/test_interpreter.py::TestInterpreterAccess::test_interpreter_script_execution[chromium] 
[gw4] [ 57%] PASSED tests/integration/test_02_display.py::TestOutput::test_multiple_display_calls_same_tag[chromium] 
tests/integration/test_02_display.py::TestOutput::test_explicit_target_pyscript_tag[chromium] 
[gw0] [ 57%] PASSED tests/integration/test_02_display.py::TestOutput::test_empty_HTML_and_console_output[chromium] 
tests/integration/test_interpreter.py::TestInterpreterAccess::test_backward_compatibility_runtime_script_execution[chromium] 
[gw5] [ 58%] PASSED tests/integration/test_02_display.py::TestOutput::test_no_implicit_target[chromium] 
tests/integration/test_02_display.py::TestOutput::test_text_HTML_and_console_output[chromium] 
[gw3] [ 58%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_element_id_change[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_display[chromium] 
[gw6] [ 59%] PASSED tests/integration/test_02_display.py::TestOutput::test_display_multiple_append_false_with_target[chromium] 
tests/integration/test_02_display.py::TestOutput::test_append_true[chromium] 
[gw1] [ 59%] PASSED tests/integration/test_02_display.py::TestOutput::test_console_line_break[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_stdio_dynamic_tags[chromium] 
[gw7] [ 60%] PASSED tests/integration/test_interpreter.py::TestInterpreterAccess::test_interpreter_script_execution[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_multiple_repls[chromium] 
[gw4] [ 60%] PASSED tests/integration/test_02_display.py::TestOutput::test_explicit_target_pyscript_tag[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_output_attribute_does_not_exist[chromium] 
[gw0] [ 61%] PASSED tests/integration/test_interpreter.py::TestInterpreterAccess::test_backward_compatibility_runtime_script_execution[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_attribute[chromium] 
[gw5] [ 61%] PASSED tests/integration/test_02_display.py::TestOutput::test_text_HTML_and_console_output[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_show_last_expression_with_output[chromium] 
[gw6] [ 62%] PASSED tests/integration/test_02_display.py::TestOutput::test_append_true[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_execute_on_shift_enter[chromium] 
[gw3] [ 62%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_display[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_run_clears_previous_output[chromium] 
[gw2] [ 63%] PASSED tests/integration/test_02_display.py::TestOutput::test_image_display[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_python_exception_after_previous_output[chromium] 
[gw1] [ 63%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_stdio_dynamic_tags[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_src_path_that_do_not_exist[chromium] 
[gw4] [ 64%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_output_attribute_does_not_exist[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_stderr_id_errors[chromium] 
[gw7] [ 64%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_multiple_repls[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_src_change[chromium] 
[gw0] [ 65%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_attribute[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_id_errors[chromium] 
[gw5] [ 65%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_show_last_expression_with_output[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_execute_preloaded_source[chromium] 
[gw3] [ 66%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_run_clears_previous_output[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_execute_code_typed_by_the_user[chromium] 
[gw6] [ 67%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_execute_on_shift_enter[chromium] 
[gw2] [ 67%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_python_exception_after_previous_output[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_multiple_repls_mixed_display_order[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_loads[chromium] 
[gw1] [ 68%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_src_path_that_do_not_exist[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_hide_previous_error_after_successful_run[chromium] 
[gw4] [ 68%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_stderr_id_errors[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_python_exception[chromium] 
[gw7] [ 69%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_src_change[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_show_last_expression[chromium] 
[gw0] [ 69%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_id_errors[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_attribute_change[chromium] 
[gw5] [ 70%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_execute_preloaded_source[chromium] 
tests/integration/test_importmap.py::TestImportmap::test_importmap[chromium] 
[gw3] [ 70%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_execute_code_typed_by_the_user[chromium] 
tests/integration/test_importmap.py::TestImportmap::test_invalid_json[chromium] 
[gw2] [ 71%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_loads[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_auto_generate[chromium] 
[gw6] [ 71%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_multiple_repls_mixed_display_order[chromium] 
tests/integration/test_00_support.py::TestSupport::test_smartrouter_cache[chromium] 
[gw6] [ 72%] PASSED tests/integration/test_00_support.py::TestSupport::test_smartrouter_cache[chromium] 
tests/integration/test_00_support.py::TestSupport::test_basic[chromium] 
[gw6] [ 72%] PASSED tests/integration/test_00_support.py::TestSupport::test_basic[chromium] 
tests/integration/test_00_support.py::TestSupport::test_wait_for_console_dont_wait_if_already_emitted[chromium] 
[gw6] [ 73%] PASSED tests/integration/test_00_support.py::TestSupport::test_wait_for_console_dont_wait_if_already_emitted[chromium] 
tests/integration/test_00_support.py::TestSupport::test_wait_for_console_exception_2[chromium] 
[gw6] [ 73%] PASSED tests/integration/test_00_support.py::TestSupport::test_wait_for_console_exception_2[chromium] 
tests/integration/test_00_support.py::TestSupport::test_iter_locator[chromium] 
[gw6] [ 74%] PASSED tests/integration/test_00_support.py::TestSupport::test_iter_locator[chromium] 
tests/integration/test_00_support.py::TestSupport::test_clear_js_errors[chromium] 
[gw6] [ 74%] PASSED tests/integration/test_00_support.py::TestSupport::test_clear_js_errors[chromium] 
tests/integration/test_00_support.py::TestSupport::test_check_js_errors_expected_not_found_but_other_errors[chromium] 
[gw6] [ 75%] PASSED tests/integration/test_00_support.py::TestSupport::test_check_js_errors_expected_not_found_but_other_errors[chromium] 
tests/integration/test_00_support.py::TestSupport::test_await_with_run_js[chromium] 
[gw1] [ 75%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_hide_previous_error_after_successful_run[chromium] 
tests/integration/test_00_support.py::TestSupport::test_check_js_errors_expected_but_didnt_raise[chromium] 
[gw1] [ 76%] PASSED tests/integration/test_00_support.py::TestSupport::test_check_js_errors_expected_but_didnt_raise[chromium] 
tests/integration/test_00_support.py::TestSupport::test_check_js_errors_multiple[chromium] 
[gw6] [ 76%] PASSED tests/integration/test_00_support.py::TestSupport::test_await_with_run_js[chromium] 
tests/integration/test_00_support.py::TestSupport::test_wait_for_console_simple[chromium] 
[gw1] [ 77%] PASSED tests/integration/test_00_support.py::TestSupport::test_check_js_errors_multiple[chromium] 
tests/integration/test_00_support.py::TestSupport::test_404[chromium] 
[gw1] [ 78%] PASSED tests/integration/test_00_support.py::TestSupport::test_404[chromium] 
tests/integration/test_00_support.py::TestSupport::test_wait_for_console_exception_1[chromium] 
[gw6] [ 78%] PASSED tests/integration/test_00_support.py::TestSupport::test_wait_for_console_simple[chromium] 
tests/integration/test_00_support.py::TestSupport::test_check_js_errors_expected[chromium] 
[gw6] [ 79%] PASSED tests/integration/test_00_support.py::TestSupport::test_check_js_errors_expected[chromium] 
tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_requests[chromium] 
[gw1] [ 79%] PASSED tests/integration/test_00_support.py::TestSupport::test_wait_for_console_exception_1[chromium] 
tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_py_config_interpreter[chromium] 
[gw4] [ 80%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_python_exception[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_display_async[chromium] 
[gw7] [ 80%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_show_last_expression[chromium] 
tests/integration/test_00_support.py::TestSupport::test_wait_for_console_timeout[chromium] 
[gw7] [ 81%] PASSED tests/integration/test_00_support.py::TestSupport::test_wait_for_console_timeout[chromium] 
tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_py_click[chromium] 
[gw5] [ 81%] XFAIL tests/integration/test_importmap.py::TestImportmap::test_importmap[chromium] 
[gw0] [ 82%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_attribute_change[chromium] 
tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_stderr[chromium] 
tests/integration/test_00_support.py::TestSupport::test_check_js_errors_some_expected_but_others_not[chromium] 
[gw5] [ 82%] PASSED tests/integration/test_00_support.py::TestSupport::test_check_js_errors_some_expected_but_others_not[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_markdown_plugin[chromium] 
[gw3] [ 83%] XPASS tests/integration/test_importmap.py::TestImportmap::test_invalid_json[chromium] 
tests/integration/test_00_support.py::TestSupport::test_console[chromium] 
[gw3] [ 83%] PASSED tests/integration/test_00_support.py::TestSupport::test_console[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_matplotlib[chromium] 
[gw2] [ 84%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_auto_generate[chromium] 
tests/integration/test_00_support.py::TestSupport::test_check_js_errors_simple[chromium] 
[gw2] [ 84%] PASSED tests/integration/test_00_support.py::TestSupport::test_check_js_errors_simple[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_todo_pylist[chromium] 
[gw1] [ 85%] PASSED tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_py_config_interpreter[chromium] 
tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_writing_to_page[chromium] 
[gw6] [ 85%] PASSED tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_requests[chromium] 
tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_py_config_fetch[chromium] 
[gw7] [ 86%] PASSED tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_py_click[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_panel_kmeans[chromium] 
[gw0] [ 86%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_stderr[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_panel_stream[chromium] 
[gw5] [ 87%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_markdown_plugin[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_bokeh[chromium] 
[gw4] [ 87%] PASSED tests/integration/test_py_repl.py::TestPyRepl::test_repl_output_display_async[chromium] 
tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_guides_asyncio[chromium] 
[gw2] [ 88%] XPASS tests/integration/test_zz_examples.py::TestExamples::test_todo_pylist[chromium] 
[gw2] [ 88%] XFAIL tests/integration/test_zz_examples.py::TestExamples::test_todo_pylist[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_todo[chromium] 
[gw1] [ 89%] PASSED tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_writing_to_page[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_simple_clock[chromium] 
[gw6] [ 89%] PASSED tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_tutorials_py_config_fetch[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_repl2[chromium] 
[gw4] [ 90%] PASSED tests/integration/test_zzz_docs_snippets.py::TestDocsSnippets::test_guides_asyncio[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_antigravity[chromium] 
[gw2] [ 90%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_todo[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_d3[chromium] 
[gw2] [ 91%] SKIPPED tests/integration/test_zz_examples.py::TestExamples::test_d3[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_repl[chromium] 
[gw3] [ 91%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_matplotlib[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_hello_world[chromium] 
[gw1] [ 92%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_simple_clock[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_altair[chromium] 
[gw2] [ 92%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_repl[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_panel[chromium] 
[gw4] [ 93%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_antigravity[chromium] 
tests/integration/test_zz_examples.py::TestExamples::test_bokeh_interactive[chromium] 
[gw4] [ 93%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_bokeh_interactive[chromium] 
________________ TestExamples.test_bokeh_interactive[chromium] _________________
[gw4] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7f07181d3c90>

    def test_bokeh_interactive(self):
        # XXX improve this test
>       self.goto("examples/bokeh_interactive.html")

tests/integration/test_zz_examples.py:113: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:220: in goto
    self.page.goto(url, timeout=0)
env/lib/python3.11/site-packages/playwright/sync_api/_generated.py:9221: in goto
    self._sync(
env/lib/python3.11/site-packages/playwright/_impl/_page.py:495: in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
env/lib/python3.11/site-packages/playwright/_impl/_frame.py:147: in goto
    await self._channel.send("goto", locals_to_params(locals()))
env/lib/python3.11/site-packages/playwright/_impl/_connection.py:61: in send
    return await self._connection.wrap_api_call(
env/lib/python3.11/site-packages/playwright/_impl/_connection.py:461: in wrap_api_call
    return await cb()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Channel object at 0x7f070797f210>
method = 'goto'
params = {'timeout': 0, 'url': 'http://fake_server/examples/bokeh_interactive.html'}
return_as_dict = False

    async def inner_send(
        self, method: str, params: Optional[Dict], return_as_dict: bool
    ) -> Any:
        if params is None:
            params = {}
        callback = self._connection._send_message_to_server(self._guid, method, params)
        if self._connection._error:
            error = self._connection._error
            self._connection._error = None
            raise error
        done, _ = await asyncio.wait(
            {
                self._connection._transport.on_error_future,
                callback.future,
            },
            return_when=asyncio.FIRST_COMPLETED,
        )
        if not callback.future.done():
            callback.future.cancel()
>       result = next(iter(done)).result()
E       playwright._impl._api_types.Error: Navigation failed because page crashed!
E       =========================== logs ===========================
E       navigating to "http://fake_server/examples/bokeh_interactive.html", waiting until "load"
E       ============================================================

env/lib/python3.11/site-packages/playwright/_impl/_connection.py:96: Error
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/bokeh_interactive.html[00m
[34;01m[  0.02 request          ] 200 - fake_server - http://fake_server/examples/bokeh_interactive.html[00m
[34;01m[  0.08 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-2.4.3.js[00m
[34;01m[  0.12 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-gl-2.4.3.min.js[00m
[34;01m[  0.12 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.3.min.js[00m
[34;01m[  0.13 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.3.min.js[00m
[34;01m[  0.16 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-2.4.3.min.js[00m
[34;01m[  0.18 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.18 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.46 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.64 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[gw7] [ 94%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_panel_kmeans[chromium] 
___________________ TestExamples.test_panel_kmeans[chromium] ___________________
[gw7] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7f482cefb590>

    def test_panel_kmeans(self):
        # XXX improve this test
        self.goto("examples/panel_kmeans.html")
>       self.wait_for_pyscript(timeout=90 * 1000)

tests/integration/test_zz_examples.py:280: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:274: in wait_for_pyscript
    elapsed_ms = self.wait_for_console(
tests/integration/support.py:253: in wait_for_console
    self.page.wait_for_timeout(50)
env/lib/python3.11/site-packages/playwright/sync_api/_generated.py:11734: in wait_for_timeout
    self._sync(self._impl_obj.wait_for_timeout(timeout=timeout))
env/lib/python3.11/site-packages/playwright/_impl/_page.py:948: in wait_for_timeout
    await self._main_frame.wait_for_timeout(timeout)
env/lib/python3.11/site-packages/playwright/_impl/_frame.py:748: in wait_for_timeout
    await self._channel.send("waitForTimeout", locals_to_params(locals()))
env/lib/python3.11/site-packages/playwright/_impl/_connection.py:61: in send
    return await self._connection.wrap_api_call(
env/lib/python3.11/site-packages/playwright/_impl/_connection.py:461: in wrap_api_call
    return await cb()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Channel object at 0x7f4827fb5110>
method = 'waitForTimeout', params = {'timeout': 50}, return_as_dict = False

    async def inner_send(
        self, method: str, params: Optional[Dict], return_as_dict: bool
    ) -> Any:
        if params is None:
            params = {}
        callback = self._connection._send_message_to_server(self._guid, method, params)
        if self._connection._error:
            error = self._connection._error
            self._connection._error = None
            raise error
        done, _ = await asyncio.wait(
            {
                self._connection._transport.on_error_future,
                callback.future,
            },
            return_when=asyncio.FIRST_COMPLETED,
        )
        if not callback.future.done():
            callback.future.cancel()
>       result = next(iter(done)).result()
E       Exception: Connection closed while reading from the driver

env/lib/python3.11/site-packages/playwright/_impl/_connection.py:96: Exception
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/panel_kmeans.html[00m
[34;01m[  0.01 request          ] 200 - fake_server - http://fake_server/examples/panel_kmeans.html[00m
[34;01m[  0.04 request          ] 200 - CACHED - https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css[00m
[34;01m[  0.04 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/css/widgets.css[00m
[34;01m[  0.04 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/css/markdown.css[00m
[34;01m[  0.05 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/vega@5[00m
[34;01m[  0.05 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/vega-lite@5[00m
[34;01m[  0.07 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/vega-embed@6[00m
[34;01m[  0.08 request          ] 200 - CACHED - https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.js[00m
[34;01m[  0.10 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-2.4.3.js[00m
[34;01m[  0.13 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.3.min.js[00m
[34;01m[  0.13 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.3.min.js[00m
[34;01m[  0.14 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/panel.min.js[00m
[34;01m[  0.15 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css[00m
[34;01m[  0.15 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/bundled/bootstraptemplate/bootstrap.css[00m
[34;01m[  0.15 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/bundled/defaulttheme/default.css[00m
[34;01m[  0.16 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js[00m
[34;01m[  0.16 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js[00m
[34;01m[  0.16 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.16 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.34 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.38 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[  0.56 console.log      ] [36m[bokeh][00m setting log level to: 'info'
[  0.66 console.info     ] [36m[pyscript/main][00m searching for <py-config>
[  0.66 console.info     ] [36m[py-config][00m loading <py-config> content
[  0.67 console.info     ] [36m[pyscript/main][00m config loaded:
{
  "type": "app",
  "schema_version": 1,
  "runtimes": [],
  "interpreters": [
    {
      "src": "https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js",
      "name": "pyodide-0.23.0",
      "lang": "python"
    }
  ],
  "packages": [
    "https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl",
    "altair",
    "numpy",
    "pandas",
    "scikit-learn",
    "panel==0.13.1"
  ],
  "fetch": [],
  "plugins": [
    "../build/plugins/python/py_tutor.py"
  ],
  "pyscript": {
    "version": "2022.12.1.dev",
    "time": "2023-04-12T15:29:12.825Z"
  }
}
[  0.67 console.info     ] [36m[py-splashscreen][00m add py-splashscreen
[  0.67 console.info     ] [36m[py-terminal][00m No <py-terminal> found, adding one
[  0.67 console.info     ] [36m[pyscript/main][00m Initializing interpreter
[  0.67 console.info     ] [36m[pyscript/main][00m Downloading pyodide-0.23.0...
[34;01m[  0.72 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js[00m
[  0.74 console.info     ] [36m[pyscript/main][00m Python startup...
[34;01m[  0.78 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_stdlib.zip[00m
[34;01m[  0.87 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.js[00m
[34;01m[  1.73 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/repodata.json[00m
[34;01m[  1.94 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.wasm[00m
[  6.06 console.info     ] [36m[pyscript/pyodide][00m importing pyscript
[  6.12 console.info     ] [36m[pyscript/pyodide][00m Found packages in configuration to install. Loading micropip...
[  6.12 console.info     ] [36m[pyscript/pyodide][00m pyodide.loadPackage: micropip
[  6.12 console.info     ] [36m[pyscript/pyodide][00m Loading micropip, packaging, pyparsing
[34;01m[  6.12 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/micropip-0.3.0-py3-none-any.whl[00m
[34;01m[  6.12 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/packaging-23.0-py3-none-any.whl[00m
[34;01m[  6.13 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyparsing-3.0.9-py3-none-any.whl[00m
[  6.23 console.info     ] [36m[pyscript/pyodide][00m Loaded pyparsing, packaging, micropip
[  6.34 console.info     ] [36m[pyscript/pyodide][00m pyodide loaded and initialized
[  6.35 console.log      ] Python initialization complete
[  6.35 console.info     ] [36m[pyscript/main][00m Python ready!
[  6.35 console.info     ] [36m[pyscript/main][00m Setting up virtual environment...
[  6.70 console.info     ] [36m[pyscript/main][00m Packages to install:  [https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl, altair, numpy, pandas, scikit-learn, panel==0.13.1]
[  6.70 console.info     ] [36m[pyscript/main][00m Fetching urls: 
[  6.70 console.info     ] [36m[pyscript/main][00m Fetched all paths
[  6.71 console.info     ] [36m[pyscript/pyodide][00m micropip install https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl,altair,numpy,pandas,scikit-learn,panel==0.13.1
[34;01m[  6.74 request          ] 200 - CACHED - https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl[00m
[34;01m[  6.75 request          ] 200 - CACHED - https://pypi.org/pypi/altair/json[00m
[34;01m[  6.75 request          ] 200 - CACHED - https://pypi.org/pypi/panel/json[00m
[34;01m[  6.98 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/18/62/47452306e84d4d2e67f9c559380aeb230f5e6ca84fafb428dd36b96a99ba/altair-4.2.2-py3-none-any.whl[00m
[34;01m[  7.61 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/12/90/9bde3e224f5f5a616036401b3f70b54f59a775cc7d630f040d7ce8363560/panel-0.13.1-py2.py3-none-any.whl[00m
[34;01m[  7.77 request          ] 200 - CACHED - https://pypi.org/pypi/entrypoints/json[00m
[34;01m[ 10.81 request          ] 200 - CACHED - https://pypi.org/pypi/pyct/json[00m
[34;01m[ 10.82 request          ] 200 - CACHED - https://pypi.org/pypi/requests/json[00m
[34;01m[ 10.83 request          ] 200 - CACHED - https://pypi.org/pypi/param/json[00m
[34;01m[ 10.85 request          ] 200 - CACHED - https://pypi.org/pypi/pyviz-comms/json[00m
[34;01m[ 10.86 request          ] 200 - CACHED - https://pypi.org/pypi/markdown/json[00m
[34;01m[ 10.86 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/35/a8/365059bbcd4572cbc41de17fd5b682be5868b218c3c5479071865cab9078/entrypoints-0.4-py3-none-any.whl[00m
[34;01m[ 10.88 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/75/e7/c7c1e9e1b6b23ca1db7af3c6826d57d8da883021f751edcc9c82143b127a/pyct-0.5.0-py2.py3-none-any.whl[00m
[34;01m[ 10.92 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/d2/f4/274d1dbe96b41cf4e0efb70cbced278ffd61b5c7bb70338b62af94ccb25b/requests-2.28.2-py3-none-any.whl[00m
[34;01m[ 10.94 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/ce/a9/2eecc0b0b21f9c256e9de036529a9f35d390a83b51f4591fb739436e51cd/param-1.13.0-py2.py3-none-any.whl[00m
[34;01m[ 10.96 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/2f/78/72bec6805be44a11dc80e949752fcaacc21661c3423e26623263d19a73d1/pyviz_comms-2.2.1-py2.py3-none-any.whl[00m
[34;01m[ 10.98 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/9a/a1/1352b0e5a3c71a79fa9265726e2217f69df9fd4de0bcb5725cc61f62a5df/Markdown-3.4.3-py3-none-any.whl[00m
[34;01m[ 11.04 request          ] 200 - CACHED - https://pypi.org/pypi/urllib3/json[00m
[34;01m[ 11.05 request          ] 200 - CACHED - https://pypi.org/pypi/charset-normalizer/json[00m
[34;01m[ 11.11 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/7b/f5/890a0baca17a61c1f92f72b81d3c31523c99bec609e60c292ea55b387ae8/urllib3-1.26.15-py2.py3-none-any.whl[00m
[34;01m[ 11.23 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/ef/81/14b3b8f01ddaddad6cdec97f2f599aa2fa466bd5ee9af99b08b7713ccd29/charset_normalizer-3.1.0-py3-none-any.whl[00m
[ 11.27 console.log      ] packaging already loaded from default channel
[ 11.27 console.log      ] pyparsing already loaded from default channel
[ 11.27 console.log      ] Loading numpy, pandas, python-dateutil, six, pytz, scikit-learn, scipy, clapack, joblib, distutils, threadpoolctl, typing-extensions, jinja2, markupsafe, pillow, pyyaml, toolz, jsonschema, attrs, pyrsistent, tqdm, bleach, webencodings, setuptools, certifi, idna
[34;01m[ 11.51 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/numpy-1.24.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 12.06 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pandas-1.5.3-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 12.33 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_dateutil-2.8.2-py2.py3-none-any.whl[00m
[34;01m[ 12.38 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/six-1.16.0-py2.py3-none-any.whl[00m
[34;01m[ 12.39 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pytz-2023.3-py2.py3-none-any.whl[00m
[34;01m[ 12.82 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/scikit_learn-1.2.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 14.66 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/scipy-1.9.3-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 15.85 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/CLAPACK-3.2.1.zip[00m
[34;01m[ 15.94 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/joblib-1.2.0-py3-none-any.whl[00m
[34;01m[ 15.95 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/distutils-1.0.0.zip[00m
[34;01m[ 15.96 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/threadpoolctl-3.1.0-py3-none-any.whl[00m
[34;01m[ 15.96 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/typing_extensions-4.5.0-py3-none-any.whl[00m
[34;01m[ 15.96 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/Jinja2-3.1.2-py3-none-any.whl[00m
[34;01m[ 15.97 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/MarkupSafe-2.1.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 16.00 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PIL-9.1.1-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 16.04 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PyYAML-6.0-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 16.05 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/toolz-0.12.0-py3-none-any.whl[00m
[34;01m[ 16.06 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/jsonschema-4.17.3-py3-none-any.whl[00m
[34;01m[ 16.07 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/attrs-22.2.0-py3-none-any.whl[00m
[34;01m[ 16.07 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyrsistent-0.19.3-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 16.08 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/tqdm-4.65.0-py3-none-any.whl[00m
[34;01m[ 16.09 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/bleach-6.0.0-py3-none-any.whl[00m
[34;01m[ 16.10 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/webencodings-0.5.1-py2.py3-none-any.whl[00m
[34;01m[ 16.12 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/setuptools-67.6.1-py3-none-any.whl[00m
[34;01m[ 16.14 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/certifi-2022.12.7-py3-none-any.whl[00m
[34;01m[ 16.14 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/idna-3.4-py3-none-any.whl[00m
----------------------------- Captured stderr call -----------------------------
Killed
[gw3] [ 94%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_hello_world[chromium] 
___________________ TestExamples.test_hello_world[chromium] ____________________
[gw3] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7f740d195110>

    def test_hello_world(self):
        self.goto("examples/hello_world.html")
>       self.wait_for_pyscript()

tests/integration/test_zz_examples.py:32: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:274: in wait_for_pyscript
    elapsed_ms = self.wait_for_console(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <integration.test_zz_examples.TestExamples object at 0x7f740d195110>
text = '[pyscript/main] PyScript page fully initialized'

    def wait_for_console(self, text, *, timeout=None, check_js_errors=True):
        """
        Wait until the given message appear in the console. If the message was
        already printed in the console, return immediately.
    
        Note: it must be the *exact* string as printed by e.g. console.log.
    
        timeout is expressed in milliseconds. If it's None, it will use
        the same default as playwright, which is 30 seconds.
    
        If check_js_errors is True (the default), it also checks that no JS
        errors were raised during the waiting.
    
        Return the elapsed time in ms.
        """
        if timeout is None:
            timeout = 30 * 1000
        # NOTE: we cannot use playwright's own page.expect_console_message(),
        # because if you call it AFTER the text has already been emitted, it
        # waits forever. Instead, we have to use our own custom logic.
        try:
            t0 = time.time()
            while True:
                elapsed_ms = (time.time() - t0) * 1000
                if elapsed_ms > timeout:
>                   raise TimeoutError(f"{elapsed_ms:.2f} ms")
E                   TimeoutError: 40728.75 ms

tests/integration/support.py:247: TimeoutError
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/hello_world.html[00m
[34;01m[  0.02 request          ] 200 - fake_server - http://fake_server/examples/hello_world.html[00m
[34;01m[  0.04 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.05 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.06 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.09 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[  0.94 console.info     ] [36m[pyscript/main][00m searching for <py-config>
[  0.94 console.info     ] [36m[py-config][00m loading <py-config> content
[  0.94 console.info     ] [36m[pyscript/main][00m config loaded:
{
  "type": "app",
  "schema_version": 1,
  "runtimes": [],
  "interpreters": [
    {
      "src": "https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js",
      "name": "pyodide-0.23.0",
      "lang": "python"
    }
  ],
  "packages": [],
  "fetch": [],
  "plugins": [
    "../build/plugins/python/py_tutor.py"
  ],
  "pyscript": {
    "version": "2022.12.1.dev",
    "time": "2023-04-12T15:29:29.445Z"
  }
}
[  0.94 console.info     ] [36m[py-splashscreen][00m add py-splashscreen
[  0.95 console.info     ] [36m[py-terminal][00m No <py-terminal> found, adding one
[  0.95 console.info     ] [36m[pyscript/main][00m Initializing interpreter
[  0.95 console.info     ] [36m[pyscript/main][00m Downloading pyodide-0.23.0...
[34;01m[  1.05 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js[00m
[  1.06 console.info     ] [36m[pyscript/main][00m Python startup...
[34;01m[  1.13 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_stdlib.zip[00m
[34;01m[  1.31 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.js[00m

tests/integration/test_zz_examples.py::TestExamples::test_toga_freedom[chromium] 
[gw3] [ 95%] XFAIL tests/integration/test_zz_examples.py::TestExamples::test_toga_freedom[chromium] 
[gw1] [ 95%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_altair[chromium] 
______________________ TestExamples.test_altair[chromium] ______________________
[gw1] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7f3b384c6210>

    def test_altair(self):
        self.goto("examples/altair.html")
>       self.wait_for_pyscript(timeout=60 * 1000)

tests/integration/test_zz_examples.py:61: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:274: in wait_for_pyscript
    elapsed_ms = self.wait_for_console(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <integration.test_zz_examples.TestExamples object at 0x7f3b384c6210>
text = '[pyscript/main] PyScript page fully initialized'

    def wait_for_console(self, text, *, timeout=None, check_js_errors=True):
        """
        Wait until the given message appear in the console. If the message was
        already printed in the console, return immediately.
    
        Note: it must be the *exact* string as printed by e.g. console.log.
    
        timeout is expressed in milliseconds. If it's None, it will use
        the same default as playwright, which is 30 seconds.
    
        If check_js_errors is True (the default), it also checks that no JS
        errors were raised during the waiting.
    
        Return the elapsed time in ms.
        """
        if timeout is None:
            timeout = 30 * 1000
        # NOTE: we cannot use playwright's own page.expect_console_message(),
        # because if you call it AFTER the text has already been emitted, it
        # waits forever. Instead, we have to use our own custom logic.
        try:
            t0 = time.time()
            while True:
                elapsed_ms = (time.time() - t0) * 1000
                if elapsed_ms > timeout:
>                   raise TimeoutError(f"{elapsed_ms:.2f} ms")
E                   TimeoutError: 60045.11 ms

tests/integration/support.py:247: TimeoutError
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/altair.html[00m
[34;01m[  0.02 request          ] 200 - fake_server - http://fake_server/examples/altair.html[00m
[34;01m[  0.04 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.04 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.04 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.06 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[  0.47 console.info     ] [36m[pyscript/main][00m searching for <py-config>
[  0.47 console.info     ] [36m[py-config][00m loading <py-config> content
[  0.48 console.info     ] [36m[pyscript/main][00m config loaded:
{
  "type": "app",
  "schema_version": 1,
  "runtimes": [],
  "interpreters": [
    {
      "src": "https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js",
      "name": "pyodide-0.23.0",
      "lang": "python"
    }
  ],
  "packages": [
    "altair",
    "pandas",
    "vega_datasets"
  ],
  "fetch": [],
  "plugins": [
    "../build/plugins/python/py_tutor.py"
  ],
  "pyscript": {
    "version": "2022.12.1.dev",
    "time": "2023-04-12T15:29:30.057Z"
  }
}
[  0.48 console.info     ] [36m[py-splashscreen][00m add py-splashscreen
[  0.48 console.info     ] [36m[py-terminal][00m No <py-terminal> found, adding one
[  0.48 console.info     ] [36m[pyscript/main][00m Initializing interpreter
[  0.48 console.info     ] [36m[pyscript/main][00m Downloading pyodide-0.23.0...
[34;01m[  0.50 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js[00m
[  0.52 console.info     ] [36m[pyscript/main][00m Python startup...
[34;01m[  0.57 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_stdlib.zip[00m
[34;01m[  0.65 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.js[00m
[gw5] [ 96%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_bokeh[chromium] 
______________________ TestExamples.test_bokeh[chromium] _______________________
[gw5] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7fdb8c48f050>

    def test_bokeh(self):
        # XXX improve this test
        self.goto("examples/bokeh.html")
>       self.wait_for_pyscript(timeout=90 * 1000)

tests/integration/test_zz_examples.py:105: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:274: in wait_for_pyscript
    elapsed_ms = self.wait_for_console(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <integration.test_zz_examples.TestExamples object at 0x7fdb8c48f050>
text = '[pyscript/main] PyScript page fully initialized'

    def wait_for_console(self, text, *, timeout=None, check_js_errors=True):
        """
        Wait until the given message appear in the console. If the message was
        already printed in the console, return immediately.
    
        Note: it must be the *exact* string as printed by e.g. console.log.
    
        timeout is expressed in milliseconds. If it's None, it will use
        the same default as playwright, which is 30 seconds.
    
        If check_js_errors is True (the default), it also checks that no JS
        errors were raised during the waiting.
    
        Return the elapsed time in ms.
        """
        if timeout is None:
            timeout = 30 * 1000
        # NOTE: we cannot use playwright's own page.expect_console_message(),
        # because if you call it AFTER the text has already been emitted, it
        # waits forever. Instead, we have to use our own custom logic.
        try:
            t0 = time.time()
            while True:
                elapsed_ms = (time.time() - t0) * 1000
                if elapsed_ms > timeout:
>                   raise TimeoutError(f"{elapsed_ms:.2f} ms")
E                   TimeoutError: 90023.62 ms

tests/integration/support.py:247: TimeoutError
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/bokeh.html[00m
[34;01m[  0.01 request          ] 200 - fake_server - http://fake_server/examples/bokeh.html[00m
[34;01m[  0.04 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js[00m
[34;01m[  0.07 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js[00m
[34;01m[  0.07 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js[00m
[34;01m[  0.10 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js[00m
[34;01m[  0.13 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js[00m
[34;01m[  0.14 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.15 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.34 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.40 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[  0.47 console.log      ] [36m[bokeh][00m setting log level to: 'info'
[  0.59 console.info     ] [36m[pyscript/main][00m searching for <py-config>
[  0.59 console.info     ] [36m[py-config][00m loading <py-config> content
[  0.59 console.info     ] [36m[pyscript/main][00m config loaded:
{
  "type": "app",
  "schema_version": 1,
  "runtimes": [],
  "interpreters": [
    {
      "src": "https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js",
      "name": "pyodide-0.23.0",
      "lang": "python"
    }
  ],
  "packages": [
    "pandas",
    "bokeh",
    "xyzservices"
  ],
  "fetch": [],
  "plugins": [
    "../build/plugins/python/py_tutor.py"
  ],
  "pyscript": {
    "version": "2022.12.1.dev",
    "time": "2023-04-12T15:29:14.606Z"
  }
}
[  0.60 console.info     ] [36m[py-splashscreen][00m add py-splashscreen
[  0.60 console.info     ] [36m[py-terminal][00m No <py-terminal> found, adding one
[  0.60 console.info     ] [36m[pyscript/main][00m Initializing interpreter
[  0.60 console.info     ] [36m[pyscript/main][00m Downloading pyodide-0.23.0...
[34;01m[  0.63 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js[00m
[  0.64 console.info     ] [36m[pyscript/main][00m Python startup...
[34;01m[  0.67 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_stdlib.zip[00m
[34;01m[  0.77 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.js[00m
[34;01m[  1.76 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/repodata.json[00m
[34;01m[  1.95 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.wasm[00m
[  6.01 console.info     ] [36m[pyscript/pyodide][00m importing pyscript
[  6.08 console.info     ] [36m[pyscript/pyodide][00m Found packages in configuration to install. Loading micropip...
[  6.08 console.info     ] [36m[pyscript/pyodide][00m pyodide.loadPackage: micropip
[  6.08 console.info     ] [36m[pyscript/pyodide][00m Loading micropip, packaging, pyparsing
[34;01m[  6.09 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/micropip-0.3.0-py3-none-any.whl[00m
[34;01m[  6.09 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/packaging-23.0-py3-none-any.whl[00m
[34;01m[  6.10 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyparsing-3.0.9-py3-none-any.whl[00m
[  6.19 console.info     ] [36m[pyscript/pyodide][00m Loaded pyparsing, packaging, micropip
[  6.33 console.info     ] [36m[pyscript/pyodide][00m pyodide loaded and initialized
[  6.34 console.log      ] Python initialization complete
[  6.34 console.info     ] [36m[pyscript/main][00m Python ready!
[  6.34 console.info     ] [36m[pyscript/main][00m Setting up virtual environment...
[  6.73 console.info     ] [36m[pyscript/main][00m Packages to install:  [pandas, bokeh, xyzservices]
[  6.73 console.info     ] [36m[pyscript/main][00m Fetching urls: 
[  6.73 console.info     ] [36m[pyscript/main][00m Fetched all paths
[  6.73 console.info     ] [36m[pyscript/pyodide][00m micropip install pandas,bokeh,xyzservices
[34;01m[  6.76 request          ] 200 - CACHED - https://pypi.org/pypi/xyzservices/json[00m
[34;01m[  6.79 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/f1/76/1d508556ee4c279841c82521aea4e12496367929d88aec6dd3959f080cfa/xyzservices-2023.2.0-py3-none-any.whl[00m
[  6.82 console.log      ] Loading pandas, numpy, python-dateutil, six, pytz, bokeh, distutils, jinja2, markupsafe, pillow, typing-extensions, pyyaml
[34;01m[  7.20 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pandas-1.5.3-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[  7.50 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/numpy-1.24.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[  7.63 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_dateutil-2.8.2-py2.py3-none-any.whl[00m
[34;01m[  7.66 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/six-1.16.0-py2.py3-none-any.whl[00m
[34;01m[  7.67 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pytz-2023.3-py2.py3-none-any.whl[00m
[34;01m[  7.94 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/bokeh-3.1.0-py3-none-any.whl[00m
[34;01m[  8.43 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/distutils-1.0.0.zip[00m
[34;01m[  8.49 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/Jinja2-3.1.2-py3-none-any.whl[00m
[34;01m[  8.49 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/MarkupSafe-2.1.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[  8.53 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PIL-9.1.1-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[  8.55 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/typing_extensions-4.5.0-py3-none-any.whl[00m
[34;01m[  8.56 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PyYAML-6.0-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m

tests/integration/test_zz_examples.py::TestExamples::test_folium[chromium] 
[gw6] [ 96%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_repl2[chromium] 
______________________ TestExamples.test_repl2[chromium] _______________________
[gw6] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7f9d98ccc290>

    def test_repl2(self):
        self.goto("examples/repl2.html")
>       self.wait_for_pyscript(timeout=1.5 * 60 * 1000)

tests/integration/test_zz_examples.py:320: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:274: in wait_for_pyscript
    elapsed_ms = self.wait_for_console(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <integration.test_zz_examples.TestExamples object at 0x7f9d98ccc290>
text = '[pyscript/main] PyScript page fully initialized'

    def wait_for_console(self, text, *, timeout=None, check_js_errors=True):
        """
        Wait until the given message appear in the console. If the message was
        already printed in the console, return immediately.
    
        Note: it must be the *exact* string as printed by e.g. console.log.
    
        timeout is expressed in milliseconds. If it's None, it will use
        the same default as playwright, which is 30 seconds.
    
        If check_js_errors is True (the default), it also checks that no JS
        errors were raised during the waiting.
    
        Return the elapsed time in ms.
        """
        if timeout is None:
            timeout = 30 * 1000
        # NOTE: we cannot use playwright's own page.expect_console_message(),
        # because if you call it AFTER the text has already been emitted, it
        # waits forever. Instead, we have to use our own custom logic.
        try:
            t0 = time.time()
            while True:
                elapsed_ms = (time.time() - t0) * 1000
                if elapsed_ms > timeout:
>                   raise TimeoutError(f"{elapsed_ms:.2f} ms")
E                   TimeoutError: 90027.99 ms

tests/integration/support.py:247: TimeoutError
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/repl2.html[00m
[34;01m[  0.01 request          ] 200 - fake_server - http://fake_server/examples/repl2.html[00m
[34;01m[  0.04 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.04 request          ] 200 - fake_server - http://fake_server/examples/repl.css[00m
[34;01m[  0.05 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.05 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.06 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[  0.26 console.info     ] [36m[pyscript/main][00m searching for <py-config>
[  0.26 console.info     ] [36m[py-config][00m loading <py-config> content
[  0.26 console.info     ] [36m[pyscript/main][00m config loaded:
{
  "type": "app",
  "schema_version": 1,
  "runtimes": [],
  "interpreters": [
    {
      "src": "https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js",
      "name": "pyodide-0.23.0",
      "lang": "python"
    }
  ],
  "packages": [
    "bokeh",
    "numpy"
  ],
  "fetch": [
    {
      "files": [
        "./utils.py",
        "./antigravity.py"
      ]
    }
  ],
  "plugins": [
    "../build/plugins/python/py_tutor.py"
  ],
  "pyscript": {
    "version": "2022.12.1.dev",
    "time": "2023-04-12T15:29:18.204Z"
  }
}
[  0.26 console.info     ] [36m[py-splashscreen][00m add py-splashscreen
[  0.26 console.info     ] [36m[py-terminal][00m No <py-terminal> found, adding one
[  0.27 console.info     ] [36m[pyscript/main][00m Initializing interpreter
[  0.27 console.info     ] [36m[pyscript/main][00m Downloading pyodide-0.23.0...
[34;01m[  0.28 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js[00m
[  0.29 console.info     ] [36m[pyscript/main][00m Python startup...
[34;01m[  0.33 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_stdlib.zip[00m
[34;01m[  0.47 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.js[00m
[34;01m[  1.40 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/repodata.json[00m
[34;01m[  1.63 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.wasm[00m
[  5.48 console.info     ] [36m[pyscript/pyodide][00m importing pyscript
[  5.53 console.info     ] [36m[pyscript/pyodide][00m Found packages in configuration to install. Loading micropip...
[  5.53 console.info     ] [36m[pyscript/pyodide][00m pyodide.loadPackage: micropip
[  5.53 console.info     ] [36m[pyscript/pyodide][00m Loading micropip, packaging, pyparsing
[34;01m[  5.56 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/micropip-0.3.0-py3-none-any.whl[00m
[34;01m[  5.57 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/packaging-23.0-py3-none-any.whl[00m
[34;01m[  5.58 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyparsing-3.0.9-py3-none-any.whl[00m
[  5.69 console.info     ] [36m[pyscript/pyodide][00m Loaded pyparsing, packaging, micropip
[  5.79 console.info     ] [36m[pyscript/pyodide][00m pyodide loaded and initialized
[  5.80 console.log      ] Python initialization complete
[  5.80 console.info     ] [36m[pyscript/main][00m Python ready!
[  5.80 console.info     ] [36m[pyscript/main][00m Setting up virtual environment...
[  6.21 console.info     ] [36m[pyscript/main][00m Packages to install:  [bokeh, numpy]
[  6.24 console.info     ] [36m[pyscript/main][00m Fetching urls: ./utils.py, ./antigravity.py
[  6.24 console.info     ] [36m[pyscript/pyodide][00m micropip install bokeh,numpy
[34;01m[  6.24 request          ] 200 - fake_server - http://fake_server/examples/utils.py[00m
[34;01m[  6.24 request          ] 200 - fake_server - http://fake_server/examples/antigravity.py[00m
[  6.30 console.log      ] Loading bokeh, distutils, numpy, jinja2, markupsafe, pillow, python-dateutil, six, typing-extensions, pyyaml
[34;01m[  6.66 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/bokeh-3.1.0-py3-none-any.whl[00m
[34;01m[  8.02 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/distutils-1.0.0.zip[00m
[34;01m[  8.37 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/numpy-1.24.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[  8.55 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/Jinja2-3.1.2-py3-none-any.whl[00m
[34;01m[  8.60 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/MarkupSafe-2.1.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[  8.67 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PIL-9.1.1-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[  8.71 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_dateutil-2.8.2-py2.py3-none-any.whl[00m
[34;01m[  8.71 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/six-1.16.0-py2.py3-none-any.whl[00m
[34;01m[  8.73 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/typing_extensions-4.5.0-py3-none-any.whl[00m
[34;01m[  8.73 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PyYAML-6.0-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[  8.74 console.info     ] [36m[pyscript/main][00m     Fetched ./utils.py ==> ./utils.py
[  8.74 console.info     ] [36m[pyscript/main][00m     Fetched ./antigravity.py ==> ./antigravity.py
[  8.74 console.info     ] [36m[pyscript/main][00m Fetched all paths

tests/integration/test_zz_examples.py::TestExamples::test_webgl_raycaster_index[chromium] 
[gw6] [ 97%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_webgl_raycaster_index[chromium] 
[gw5] [ 97%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_folium[chromium] 
[gw2] [ 98%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_panel[chromium] 
______________________ TestExamples.test_panel[chromium] _______________________
[gw2] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7f270150a550>

    def test_panel(self):
        self.goto("examples/panel.html")
>       self.wait_for_pyscript(timeout=90 * 1000)

tests/integration/test_zz_examples.py:251: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:274: in wait_for_pyscript
    elapsed_ms = self.wait_for_console(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <integration.test_zz_examples.TestExamples object at 0x7f270150a550>
text = '[pyscript/main] PyScript page fully initialized'

    def wait_for_console(self, text, *, timeout=None, check_js_errors=True):
        """
        Wait until the given message appear in the console. If the message was
        already printed in the console, return immediately.
    
        Note: it must be the *exact* string as printed by e.g. console.log.
    
        timeout is expressed in milliseconds. If it's None, it will use
        the same default as playwright, which is 30 seconds.
    
        If check_js_errors is True (the default), it also checks that no JS
        errors were raised during the waiting.
    
        Return the elapsed time in ms.
        """
        if timeout is None:
            timeout = 30 * 1000
        # NOTE: we cannot use playwright's own page.expect_console_message(),
        # because if you call it AFTER the text has already been emitted, it
        # waits forever. Instead, we have to use our own custom logic.
        try:
            t0 = time.time()
            while True:
                elapsed_ms = (time.time() - t0) * 1000
                if elapsed_ms > timeout:
>                   raise TimeoutError(f"{elapsed_ms:.2f} ms")
E                   TimeoutError: 90044.43 ms

tests/integration/support.py:247: TimeoutError
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/panel.html[00m
[34;01m[  0.02 request          ] 200 - fake_server - http://fake_server/examples/panel.html[00m
[34;01m[  0.04 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-2.4.3.js[00m
[34;01m[  0.06 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.3.min.js[00m
[34;01m[  0.07 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.3.min.js[00m
[34;01m[  0.08 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/@holoviz/panel@0.14.1/dist/panel.min.js[00m
[34;01m[  0.09 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.09 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.34 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.41 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[  5.35 console.info     ] [36m[pyscript/main][00m searching for <py-config>
[  5.35 console.info     ] [36m[py-config][00m loading <py-config> content
[  5.37 console.info     ] [36m[pyscript/main][00m config loaded:
{
  "type": "app",
  "schema_version": 1,
  "runtimes": [],
  "interpreters": [
    {
      "src": "https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js",
      "name": "pyodide-0.23.0",
      "lang": "python"
    }
  ],
  "packages": [
    "https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl",
    "numpy",
    "panel==0.14.1"
  ],
  "fetch": [],
  "plugins": [
    "../build/plugins/python/py_tutor.py"
  ],
  "pyscript": {
    "version": "2022.12.1.dev",
    "time": "2023-04-12T15:29:35.569Z"
  }
}
[  5.37 console.info     ] [36m[py-splashscreen][00m add py-splashscreen
[  5.38 console.info     ] [36m[py-terminal][00m No <py-terminal> found, adding one
[  5.38 console.info     ] [36m[pyscript/main][00m Initializing interpreter
[  5.38 console.info     ] [36m[pyscript/main][00m Downloading pyodide-0.23.0...
[34;01m[  5.73 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js[00m
[  5.80 console.info     ] [36m[pyscript/main][00m Python startup...
[34;01m[  5.85 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_stdlib.zip[00m
[34;01m[  5.93 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.js[00m
[gw0] [ 98%] FAILED tests/integration/test_zz_examples.py::TestExamples::test_panel_stream[chromium] 
___________________ TestExamples.test_panel_stream[chromium] ___________________
[gw0] linux -- Python 3.11.0 /home/jglass/Documents/pyscript/pyscriptjs/env/bin/python

self = <integration.test_zz_examples.TestExamples object at 0x7fbc95707e10>

    def test_panel_stream(self):
        # XXX improve this test
        self.goto("examples/panel_stream.html")
>       self.wait_for_pyscript(timeout=3 * 60 * 1000)

tests/integration/test_zz_examples.py:291: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
tests/integration/support.py:274: in wait_for_pyscript
    elapsed_ms = self.wait_for_console(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <integration.test_zz_examples.TestExamples object at 0x7fbc95707e10>
text = '[pyscript/main] PyScript page fully initialized'

    def wait_for_console(self, text, *, timeout=None, check_js_errors=True):
        """
        Wait until the given message appear in the console. If the message was
        already printed in the console, return immediately.
    
        Note: it must be the *exact* string as printed by e.g. console.log.
    
        timeout is expressed in milliseconds. If it's None, it will use
        the same default as playwright, which is 30 seconds.
    
        If check_js_errors is True (the default), it also checks that no JS
        errors were raised during the waiting.
    
        Return the elapsed time in ms.
        """
        if timeout is None:
            timeout = 30 * 1000
        # NOTE: we cannot use playwright's own page.expect_console_message(),
        # because if you call it AFTER the text has already been emitted, it
        # waits forever. Instead, we have to use our own custom logic.
        try:
            t0 = time.time()
            while True:
                elapsed_ms = (time.time() - t0) * 1000
                if elapsed_ms > timeout:
>                   raise TimeoutError(f"{elapsed_ms:.2f} ms")
E                   TimeoutError: 180041.26 ms

tests/integration/support.py:247: TimeoutError
---------------------------- Captured stdout setup -----------------------------

----------------------------- Captured stdout call -----------------------------
[33;01m[  0.00 page.goto        ] examples/panel_stream.html[00m
[34;01m[  0.01 request          ] 200 - fake_server - http://fake_server/examples/panel_stream.html[00m
[34;01m[  0.02 request          ] 200 - CACHED - https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css[00m
[34;01m[  0.03 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/css/widgets.css[00m
[34;01m[  0.03 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/css/markdown.css[00m
[34;01m[  0.03 request          ] 200 - CACHED - https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.js[00m
[34;01m[  0.04 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-2.4.3.js[00m
[34;01m[  0.06 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.3.min.js[00m
[34;01m[  0.07 request          ] 200 - CACHED - https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.3.min.js[00m
[34;01m[  0.07 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/panel.min.js[00m
[34;01m[  0.09 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css[00m
[34;01m[  0.09 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/bundled/bootstraptemplate/bootstrap.css[00m
[34;01m[  0.09 request          ] 200 - CACHED - https://unpkg.com/@holoviz/panel@0.13.1/dist/bundled/defaulttheme/default.css[00m
[34;01m[  0.09 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js[00m
[34;01m[  0.10 request          ] 200 - CACHED - https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js[00m
[34;01m[  0.10 request          ] 200 - fake_server - http://fake_server/build/pyscript.css[00m
[34;01m[  0.10 request          ] 200 - fake_server - http://fake_server/examples/assets/css/examples.css[00m
[34;01m[  0.28 request          ] 200 - fake_server - http://fake_server/build/pyscript.js[00m
[34;01m[  0.30 request          ] 200 - fake_server - http://fake_server/examples/logo.png[00m
[  0.51 console.log      ] [36m[bokeh][00m setting log level to: 'info'
[  0.62 console.info     ] [36m[pyscript/main][00m searching for <py-config>
[  0.62 console.info     ] [36m[py-config][00m loading <py-config> content
[  0.63 console.info     ] [36m[pyscript/main][00m config loaded:
{
  "type": "app",
  "schema_version": 1,
  "runtimes": [],
  "interpreters": [
    {
      "src": "https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js",
      "name": "pyodide-0.23.0",
      "lang": "python"
    }
  ],
  "packages": [
    "https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl",
    "numpy",
    "pandas",
    "panel==0.13.1"
  ],
  "fetch": [],
  "plugins": [
    "../build/plugins/python/py_tutor.py"
  ],
  "pyscript": {
    "version": "2022.12.1.dev",
    "time": "2023-04-12T15:29:13.200Z"
  }
}
[  0.63 console.info     ] [36m[py-splashscreen][00m add py-splashscreen
[  0.63 console.info     ] [36m[py-terminal][00m No <py-terminal> found, adding one
[  0.64 console.info     ] [36m[pyscript/main][00m Initializing interpreter
[  0.64 console.info     ] [36m[pyscript/main][00m Downloading pyodide-0.23.0...
[34;01m[  0.68 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js[00m
[  0.69 console.info     ] [36m[pyscript/main][00m Python startup...
[34;01m[  0.72 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_stdlib.zip[00m
[34;01m[  0.82 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.js[00m
[34;01m[  1.54 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/repodata.json[00m
[34;01m[  1.70 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.asm.wasm[00m
[  5.82 console.info     ] [36m[pyscript/pyodide][00m importing pyscript
[  5.90 console.info     ] [36m[pyscript/pyodide][00m Found packages in configuration to install. Loading micropip...
[  5.90 console.info     ] [36m[pyscript/pyodide][00m pyodide.loadPackage: micropip
[  5.90 console.info     ] [36m[pyscript/pyodide][00m Loading micropip, packaging, pyparsing
[34;01m[  5.91 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/micropip-0.3.0-py3-none-any.whl[00m
[34;01m[  5.92 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/packaging-23.0-py3-none-any.whl[00m
[34;01m[  5.92 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyparsing-3.0.9-py3-none-any.whl[00m
[  6.00 console.info     ] [36m[pyscript/pyodide][00m Loaded pyparsing, packaging, micropip
[  6.12 console.info     ] [36m[pyscript/pyodide][00m pyodide loaded and initialized
[  6.13 console.log      ] Python initialization complete
[  6.13 console.info     ] [36m[pyscript/main][00m Python ready!
[  6.13 console.info     ] [36m[pyscript/main][00m Setting up virtual environment...
[  6.47 console.info     ] [36m[pyscript/main][00m Packages to install:  [https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl, numpy, pandas, panel==0.13.1]
[  6.47 console.info     ] [36m[pyscript/main][00m Fetching urls: 
[  6.47 console.info     ] [36m[pyscript/main][00m Fetched all paths
[  6.47 console.info     ] [36m[pyscript/pyodide][00m micropip install https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl,numpy,pandas,panel==0.13.1
[34;01m[  6.50 request          ] 200 - CACHED - https://cdn.holoviz.org/panel/0.14.3/dist/wheels/bokeh-2.4.3-py3-none-any.whl[00m
[34;01m[  6.52 request          ] 200 - CACHED - https://pypi.org/pypi/panel/json[00m
[34;01m[  7.20 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/12/90/9bde3e224f5f5a616036401b3f70b54f59a775cc7d630f040d7ce8363560/panel-0.13.1-py2.py3-none-any.whl[00m
[34;01m[  9.87 request          ] 200 - CACHED - https://pypi.org/pypi/param/json[00m
[34;01m[  9.90 request          ] 200 - CACHED - https://pypi.org/pypi/pyviz-comms/json[00m
[34;01m[  9.90 request          ] 200 - CACHED - https://pypi.org/pypi/requests/json[00m
[34;01m[  9.90 request          ] 200 - CACHED - https://pypi.org/pypi/pyct/json[00m
[34;01m[  9.91 request          ] 200 - CACHED - https://pypi.org/pypi/markdown/json[00m
[34;01m[  9.96 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/ce/a9/2eecc0b0b21f9c256e9de036529a9f35d390a83b51f4591fb739436e51cd/param-1.13.0-py2.py3-none-any.whl[00m
[34;01m[  9.97 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/2f/78/72bec6805be44a11dc80e949752fcaacc21661c3423e26623263d19a73d1/pyviz_comms-2.2.1-py2.py3-none-any.whl[00m
[34;01m[  9.99 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/d2/f4/274d1dbe96b41cf4e0efb70cbced278ffd61b5c7bb70338b62af94ccb25b/requests-2.28.2-py3-none-any.whl[00m
[34;01m[ 10.01 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/75/e7/c7c1e9e1b6b23ca1db7af3c6826d57d8da883021f751edcc9c82143b127a/pyct-0.5.0-py2.py3-none-any.whl[00m
[34;01m[ 10.03 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/9a/a1/1352b0e5a3c71a79fa9265726e2217f69df9fd4de0bcb5725cc61f62a5df/Markdown-3.4.3-py3-none-any.whl[00m
[34;01m[ 10.08 request          ] 200 - CACHED - https://pypi.org/pypi/urllib3/json[00m
[34;01m[ 10.11 request          ] 200 - CACHED - https://pypi.org/pypi/charset-normalizer/json[00m
[34;01m[ 10.14 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/7b/f5/890a0baca17a61c1f92f72b81d3c31523c99bec609e60c292ea55b387ae8/urllib3-1.26.15-py2.py3-none-any.whl[00m
[34;01m[ 10.26 request          ] 200 - CACHED - https://files.pythonhosted.org/packages/ef/81/14b3b8f01ddaddad6cdec97f2f599aa2fa466bd5ee9af99b08b7713ccd29/charset_normalizer-3.1.0-py3-none-any.whl[00m
[ 10.31 console.log      ] packaging already loaded from default channel
[ 10.31 console.log      ] pyparsing already loaded from default channel
[ 10.31 console.log      ] Loading numpy, pandas, python-dateutil, six, pytz, pyyaml, typing-extensions, jinja2, markupsafe, pillow, tqdm, bleach, webencodings, setuptools, distutils, certifi, idna
[34;01m[ 10.46 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/numpy-1.24.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 10.96 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pandas-1.5.3-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 11.28 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/python_dateutil-2.8.2-py2.py3-none-any.whl[00m
[34;01m[ 11.32 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/six-1.16.0-py2.py3-none-any.whl[00m
[34;01m[ 11.34 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pytz-2023.3-py2.py3-none-any.whl[00m
[34;01m[ 11.37 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PyYAML-6.0-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 11.38 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/typing_extensions-4.5.0-py3-none-any.whl[00m
[34;01m[ 11.38 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/Jinja2-3.1.2-py3-none-any.whl[00m
[34;01m[ 11.41 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/MarkupSafe-2.1.2-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 11.46 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/PIL-9.1.1-cp311-cp311-emscripten_3_1_32_wasm32.whl[00m
[34;01m[ 11.52 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/tqdm-4.65.0-py3-none-any.whl[00m
[34;01m[ 11.53 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/bleach-6.0.0-py3-none-any.whl[00m
[34;01m[ 11.57 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/webencodings-0.5.1-py2.py3-none-any.whl[00m
[34;01m[ 11.62 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/setuptools-67.6.1-py3-none-any.whl[00m
[34;01m[ 11.64 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/distutils-1.0.0.zip[00m
[34;01m[ 11.65 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/certifi-2022.12.7-py3-none-any.whl[00m
[34;01m[ 11.69 request          ] 200 - CACHED - https://cdn.jsdelivr.net/pyodide/v0.23.0/full/idna-3.4-py3-none-any.whl[00m

tests/integration/test_zz_examples.py::TestExamples::test_numpy_canvas_fractals[chromium] 
[gw0] [ 99%] PASSED tests/integration/test_zz_examples.py::TestExamples::test_numpy_canvas_fractals[chromium] 